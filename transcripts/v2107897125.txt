So, ich bin am Start und Leute, waren heute auch Leute, die ihr kennt, wieder super lustig, weil 1. April ist.
Ich habe das Gefühl, manche Leute sind das ganze Jahr über zum Dachen im Keller, aber am 1. April, unzufasching, sind sie alle super lustig.
Lull, da übertreffen sie sich alle immer.
Ich mag mich, wie viele Videos auf YouTube es heute schon gegeben hat, dass wieder irgendwelche Leute ihren Channel schließen oder Onlyfans eröffnen oder whatever, da immer so kommt.
Ja, ich auch.
So, Chatgear, ich glaube, ich habe mein VM-Problem gefixt.
Ihr kennt mein VM-Problem, ne?
Wer das VM-Problem nicht kennt, dem werde ich das mal kurz demonstrieren, wie mein VM-Problem aussieht.
Es gibt mehrere VM-Probleme, die müssen wir jetzt alle fixen.
Wobei, das geht schnell, weil ich weiß schon, wie es funktioniert.
Und dann, ganz wichtig, da muss ich noch hier, hört ihr das?
Hört ihr?
Ja.
Man hört es nicht wirklich, ja.
Ja, vielleicht so?
Ne.
Ich habe hier noch so ein Oster-Fantasie-Edel-Vollmilch-Hase.
Den muss ich jetzt gleich fressen.
Komplett.
Easy.
Ja, sind nur 150 Gramm.
Gestern Rennen, heute nicht.
Nehme ich vielleicht ein paar Gramm zu wieder, aber scheiß drauf.
Muss weg.
Hallo, RF-Programmer.
Ja, heute müssen wir wahrscheinlich auch RF-Programmen.
Also, sofern RF irgendwas mit Funk zu tun hat.
Äh, was ist mit meiner VM los?
Ah, guck mal, mein Klo. Nice.
Also, es gibt mein VM-Problem.
Ich zeige euch das mal.
Wenn ich ein Programm starte, was OpenGL in einer bestimmten Version benutzt, dann passiert folgendes.
Manchmal, nicht immer.
Meistens.
Ich glaube.
Okay, jetzt gerade nicht.
Aber dann kackt die VM manchmal ab.
Ich habe noch nicht ganz festgestellt, warum.
Jetzt ist natürlich der Vorführeffekt geil.
Ja, jetzt ist nichts.
Ah, jetzt, okay, habt ihr das gesehen?
Jetzt ist die VM abgekackt.
Und ich habe das heute Morgen bestimmt zwei Stunden lang debuggt, woran das Problem liegt.
Und das Problem liegt an einem Zusammenspiel aus kaputtenen VMware-Treibern,
dem DirectX 12 Renderer unter Windows für VMware
und irgendwas weiteres noch unter Linux, keine Ahnung.
Ja.
Und ich werde euch jetzt mal was anderes zeigen.
Und das Einzige, wie die VM wieder zu fixen ist, tatsächlich die VM abzuschießen.
Ja, das ist echt das Einzige, was funktioniert.
Ansonsten keine Chance.
Sehr, sehr weird, Champ.
Und ich habe noch was weiteres festgestellt.
Das hat mich auf die Idee gebracht, woran das liegen könnte.
Ich zeige euch mal was.
Wir machen jetzt erst mal Arch Linux Package Updates.
Weil Arch Linux Rolling Code ist.
Rolling Release, by the way, und Beste.
Und ich use Arch und so weiter und so fort.
Ich mache jetzt mal ein Package Update.
Das Problem liegt dann außerhalb der VM.
Kombination.
Ich glaube, Shit-VM-Wehrtreiber in der VM
und Shit-Renderer-Implementierung außerhalb der VM.
Was ist von beiden jetzt wirkliches?
Ich weiß nicht, vielleicht, ich könnte mir vorstellen, es liegt am Zusammenspiel.
Ja.
So, und jetzt zeige ich euch noch was.
Ihr seht, mein Desktop funktioniert perfectly fine gerade.
Aber jetzt mache ich ein Package Update.
Und sofern ihr das in der Zwischenzeit nicht gefixt habt,
werdet ihr sehen, mein Desktop ist nach dem Package Update kaputt.
Und da bin ich heute Morgen, guck hier, neue Mesa-Treiber und so.
Und da bin ich heute Morgen das SSH-Exploit rein-updaten, Leute.
Wir haben das SSH-Exploit quasi geskippt,
weil Arch Linux so neu war, dass die schon neuer als die Exploit-Version waren.
5.
6.
1.
1 hatte das Exploit.
5.
6.
1.
2 hatte das Exploit schon wieder nicht.
Die waren einfach zu blazingly fast.
Die sind bestimmt alle written in Rust, die Arch Linux-Leute.
So, und jetzt reboote ich mal und dann werdet ihr feststellen,
irgendwie funktioniert mein Desktop nicht mehr richtig.
Ich hoffe, das ist jetzt das Gleiche wie bei meiner anderen VM.
Ah, Achtung.
Und, ja, Desktop kaputt.
Desktop kaputt.
So, das hatte ich heute Morgen in meiner anderen VM auch.
Da habe ich mir gedacht,
hä?
Wie jetzt?
Nach dem Treiber-Update von den Open... von den Grafik-Treibern,
die ja unter anderem so das ganze OpenGL-Zeug und so bereitstellen.
Danach geht der Kram irgendwie kaputt.
Er geht zwar nicht so richtig kaputt, dass ich jetzt neu starten müsste,
aber er geht kaputt.
So, und da bin ich heute Morgen auf die Idee gekommen,
okay, was ist denn hier?
By the way, das System läuft, wie ihr seht.
Ihr seht bloß nichts.
So, das Erste, was ich erstmal... was ich mal machen muss, ist...
Ja, ihr seht, ich konnte im Hintergrund tippen,
mein, ähm, Composite-Window-Gedöns abschalten.
Also, das, was Transparenz und sowas macht.
Weil, ihr werdet feststellen, sobald ich PCom anmache,
ist der Desktop kaputt.
Der geht nicht mehr.
Guck, ich klicke jetzt hier drumherum und da tut sich auch nichts mehr und so.
Aber sobald ich PCom wieder stoppe, ist weg.
Ja, also, wie man sieht, sieht man nichts.
Das erste Problem lässt sich relativ einfach fixen, indem man,
weshalb auch immer,
weshalb auch immer,
das habe ich auch durch viel rumprobieren heute Morgen rausgekriegt,
äh, vSync ausschaltet.
Warum? Man weiß es nicht.
So, und siehe da,
es funzt wieder auf den ersten Blick.
Was ich jetzt noch nicht ausprobiert habe, ist,
ob das auch schon das Problem mit den verbackenen OpenGL-Programmen fixt.
Äh, sieht so aus.
Päh!
Es ist tatsächlich nur vSync,
was die Probleme macht.
Und ich dachte, es wäre mehr.
Seht ihr mal.
Es ist, es ist nur vSync.
Es ist auch schon ziemlich hängengeblieben, oder?
Oder?
Nee, nee, nee, okay.
Nein, nein, es ist nicht nur vSync.
Es ist nicht nur vSync.
Es ist ziemlich broken.
Ja, wie ihr seht.
Wenn man, wenn man jetzt das ausschaltet, das ist wieder abgekackt.
So, und jetzt zeige ich euch, wie ich das heute Morgen gefixt habe.
Nämlich auf 2 und, also, ich bin, ich bin draufgekommen,
wie gesagt, durch die, durch das Grafikkartenupdate, äh,
nicht durch das Grafikkarten, durch das Grafiktreiberupdate,
wo dann die ganze VM kaputt war danach.
So, als erstes ist mir aufgefallen,
machen wir jetzt mal hier so als kleines Intro,
bevor wir dann die ZigBee-Geschichte bauen.
Als erstes ist mir aufgefallen,
dass ich sinnloses Zeug installiert habe.
Ist mir aufgefallen.
Na, man sieht ja auch, das resized, alles gar nicht mehr richtig und
ist irgendwie, ist irgendwie ein bisschen broken alles, ne?
Ein bisschen kaputt.
So.
Und das liegt daran,
weil
der Grafikkarten,
also, ich sag Grafikkarten,
der Linux, die Linux-seitliche Implementierung von dem VMWare-Grafiktreiber
irgendwie verbuggt ist.
Und ich hab noch den hier installiert,
weil ich dachte, den bräuchte man,
aber, das steht übrigens auch im Arch-Wiki,
aber den braucht man gar nicht mehr,
weil lsmod grep vmware,
die haben mittlerweile den VMWare-Treiber im Kernel drin.
Also merke, man braucht keine Zusatztreiber mehr für VMWare
unter Linux mit ordentlicher, ordentlicher Displayausgabe.
Ja, da kann man alles aninstallen,
das ist mittlerweile bei Arch-Wiki standardmäßig im Kernel drin.
Wenn ich jetzt reboote, funktioniert wieder alles.
Also zumindest das Resizen und sowas.
Also wer den Krempel installiert hat,
kann das gleich wieder runterschmeißen.
Bringt nix.
Das war früher notwendig, jetzt nicht mehr.
Seht ihr, guck, Resize und so.
Ich glaub Resize...
Resize ist immer noch broken,
aber ihr seht prinzipiell von uns der ganze Kram,
warum auch Resize immer noch kaputt ist.
So.
Und jetzt ist die Frage, ist das schon gefixt?
Müssen wir gleich gucken.
Ist das schon gefixt?
Manchmal geht's, manchmal nicht.
Muss man ein paarmal ausprobieren.
Neuen Feierabend spielt sie.
Okay, ist noch nicht gefixt.
Und jetzt zeige ich euch den eigentlichen...
Ah!
Ne, ist wieder broken.
Und jetzt zeige ich euch den eigentlichen Fix
und ich hoffe, der fixt das jetzt auch wirklich.
Achso, das ist ja wieder kaputt.
Jetzt zeige ich euch den eigentlichen Fix, den man machen muss,
damit forever nicht mehr rumspackt.
Und zwar...
Oh shit, ich hab's mir nicht rauskopiert.
Das muss ich auch mal kurz bei Google suchen.
Und zwar, man muss in seine VMware-Settings reingehen.
In die VMware...
In das VMware-Config...
In das Virtual-Machine-Config-File.
Ich hab echt nur Notepad hier auf meinem Host.
Ich mach da nie was großartiges.
Egal.
Und da muss man jetzt ein paar neue Sachen eintragen.
Was ist denn das hier eigentlich alles für ein Shit?
Leaked.
Private Keys leaked.
So.
Ja, ja, alles gut.
Ah Moment, das ist die Windows 11 VMware.
Die will ich überhaupt nicht aufmachen.
Das ist die falsche, die ich aufgemacht hab.
So.
Jetzt macht man die Config auf davon.
Und dann muss man dort eintragen.
Das muss ich jetzt erst noch mal googeln,
weil da kommt niemand drauf.
Ich hab das so gefunden.
VMware, Glitch, Linux und dann MKS oder sowas.
Oh shit.
Mein Browser hier findet andere Sachen.
Ups.
Was der Bug ist.
So was hier zum Beispiel.
Und das, wenn ich manche Programme in der VM aufmache,
die ganze VM crasht.
So und hier hab ich jetzt so ein paar Sachen drinne gefunden,
die man angeblich machen kann.
Und unter anderem steht da drinne,
man soll den DirectX 12 Renderer ausschalten.
Ich bin mir nicht mehr sicher, wo ich es gefunden habe.
Das war irgendwie MKS.
MKS.
For VMware Disable DirectX 12.
Hier.
Da.
Genau.
Diesen Shit braucht man.
Wobei das noch nicht alles ist, was ich bei mir eingetragen habe.
Aber gucken wir mal, ob es das tut.
Das tragen wir ein.
Vendor ID lassen wir raus.
DirectX 12 schalten wir aus.
Und wir benutzen den OpenGL Renderer.
Damit hatte ich das Problem bei mir nicht mehr.
Jetzt müssen wir nur gucken, ob das funzt.
Was ich hier gemacht habe.
Ja.
Also 3D Beschleunigung ist an.
Jetzt müssen wir kurz in das Log gucken.
Ob dort jetzt steht, was er geladen hat.
Nvidia.
OpenGL Renderer.
Nvidia Version.
Genau.
GL Renderer.
So und jetzt ist das Problem höchstwahrscheinlich gefixt.
Wenn das Problem jetzt nicht gefixt ist,
dann ist es in meiner anderen VM auch nicht gefixt.
Und ich habe es einfach nicht richtig ausprobiert.
Heute Morgen.
Okay.
Kann ja auch sein.
Probieren wir mal.
Wir starten eine Anwendung, die irgendwie komisch rendert.
Und jetzt tracken und droppen wir die.
Und es ist nicht abgekackt.
Nächster.
Nächster Versuch.
Es kackt nicht mehr ab.
Seht ihr?
Aus irgendwelchen Gründen ist der DirectX 12 Renderer kaputt.
Guck jetzt.
Ich kann es auch noch ein drittes Mal ausprobieren.
Aber jetzt kackt es nicht mehr ab.
Also ich habe quasi die Sache.
Ja.
Seht ihr?
Ich weiß nicht, was das für ein weird champiger Bug ist.
Aber es ist ein Zusammenspiel aus den Linux Grafiktreibern,
aus dem DirectX 12 Renderer und was auch immer noch.
Keine Ahnung.
Aber ich glaube, ich habe es.
Ich glaube, ich habe es jetzt behoben.
Und ein weiterer Vorteil ist GLX Gears ist jetzt so schnell wie nie.
Dank.
Keinem V-Sync mehr.
Guck mal hier.
585 bei dieser super komplexen 3D Darstellung.
Ja, so sieht es aus.
Und jetzt wisst ihr, was ich jetzt mache?
Jetzt fresse ich den Osterhaas.
Und nebenbei downloade ich Home Assistant und installiere mir eine VM mit Home Assistant,
da ich nachher meine ZigBee Sachen ausprobieren kann.
Warum ich ein eigenes ZigBee Gerät bauen will, weil ich kann.
Es hat tatsächlich.
Es hat tatsächlich einen Grund.
Und zwar ich habe einen Fischteich im Garten und der Fischteich, der friert oder der droht
im Winter immer zuzufrieren.
Und man könnte es natürlich jetzt machen wie der letzte Noob und einfach den Fischteich
immer zudecken, wenn es kühl ist und so und dann wieder zugedeckt lassen und so.
Aber das machen wir nicht.
Der Winter ist vorbei.
Okay.
Twitch Chat bestätigt mir, dass es nächstes Jahr keinen Winter mehr gibt.
Dann.
Dann ist es gut.
Dann können wir uns das auch sparen.
Winter war eine einmalige Sache dieses Jahr.
Kommt nicht wieder vor.
Wobei.
Bald gibt es echt keine Winter mehr, wenn das so weitergeht.
Das ist kein Software Rendering.
Das ist hier.
Hier legst Info Grab.
Nach was muss man da grabben?
Version oder sowas?
Nee, nee.
Das ist hier immer noch ganz normales gerapptes OpenGL für für Linux.
So.
Und was ich vorhabe ist, ich stelle mir da hinten ein ZigBee Gerät hin, was dann einen
DS18B20 dran bekommt.
So ein Ding.
Den hänge ich in den Fischteich und übertrage die Temperatur im Fischteich an meine Home
Automatisierungslösung.
Und da kriege ich eine Nachricht, wenn es unter einem gewissen Wert fällt für zwei Tage oder
so.
Und dann kann ich den zudecken.
Kannst du dir den Bug erklären?
Nee.
Ach hier.
Guck mal.
Ich habe eine Ubuntu WSL Installation.
Oh.
Da steige ich ja schon aus.
Auf eine andere Festplatte umgezogen mit Hilfe von Export und Import.
Mit was?
Das kenne ich nicht.
Ich hätte einfach den Ordner kopiert.
Ehrlich gesagt.
Erstaunlicherweise ging fast alles gut, außer dass ich ZSH neu installieren musste.
Komisch, dass er gerade, dass sein Reimport nicht überlebt hat.
Hä?
Ich habe jetzt vermutet, wenn man den WSL-Ordner copy-pasted, quasi von einem Laufwerk auf
einen anderen, dann geht es einfach.
Habe ich noch nie ausprobiert WSL umzuziehen.
Linux selber umzuziehen ist glücklicherweise immer relativ easy, weil du kopierst dein
Heimatverzeichnis und richtest den Rest neu ein.
Installierst ein paar Sachen und gut ist.
Ich mache gar keinen Vollbackup mehr von Linux.
Ich habe meine Dot-Files.
Das reicht mir zum größten Teil.
Meine persönlichen Config-Files und den Rest kann ich zur Not, wenn es echt kaputt geht,
reinstallen.
Aber hauptsache meine Config-Files und so bleibt alles da.
Also ich wusste nicht mal, dass WSL das kann.
Aber wie man WSL ordentlich exportiert, importiert, backup, restored, weiß ich nicht.
Habe ich noch nie gemacht.
Lautstärke der Playlist ist cringe.
Das war jetzt richtig boomermäßiges Benutzen des Wortes, weil es hat damit überhaupt nichts
zu tun.
So.
Jetzt muss ich mal Home Assistant runterladen.
Und dabei meinen Schokoladen-Osterhase fressen.
Nicht vmware.
Ich kann nicht reden.
Home Assistant download vmware.
Jawoll.
Windows vmware Workstation vmdk runterladen.
Jawoll.
Gib ihm.
Ich bin geblendet von der Seite.
Downloadet er jetzt?
Jawoll.
Okay.
Also Leute.
Jetzt wird er Schoko-Hase gefressen.
Ja.
150 Gramm.
Nicht einfach nur Vollmilch-Schokolade.
Nein.
Edel-Vollmilch.
Das ist wahrscheinlich so ein Wort, wie sich auch jeder Berater draufschreiben darf.
Ein nicht geschütztes Wort.
Das ist wie bei Katzenfutter wahrscheinlich.
Bei Katzenfutter ist auch alles.
Ich kopiere das mal.
Bei Katzenfutter ist ja auch alles immer Premium XXL und Triple A XXL.
Von Lind.
Ne.
Lind kaufe ich mir oft.
Allerdings immer nach Ostern und nach Weihnachten.
Weil dann kostet der Kram nur noch ein Drittel.
Schmeckt genauso.
Haben wir noch den Stream Pie Home Assistant?
Ja.
Ich habe den Raspberry Pi.
Aber ich will den Raspberry Pi heute nicht anmachen.
Weil meine China-Chinesen-Steckdosenleiste kaputt ist.
Und ich gerade keine freien Steckdosen habe.
Das heißt, ich muss jetzt ein bisschen hier rumwurschteln.
Dass ich Netzwerkkabel hinkriege.
Ich muss jetzt hier rumwurschteln.
Ich muss jetzt hier rumwurschteln.
Ich muss jetzt hier rumwurschteln.
Ich muss jetzt hier rumwurschteln.
Ich muss jetzt hier rumwurschteln.
Dass ich Netzwerkkabel hinkriege.
Den Pi anschließen kann.
Außerdem ist der outdated.
Ich installiere lieber das aktuelle.
Was heißt installieren?
Ich mache eine 4M.
Und gut ist.
Hänge das rein.
Ja.
Jetzt muss das im Prinzip eh nur doppelt anklicken.
4M Workstation.
Was?
Ey.
Wie funzt das jetzt?
Vielleicht hätte ich das jetzt auch noch mal ausprobiert.
Ich weiß nicht.
Ich weiß nicht.
Ich weiß nicht.
Ich weiß nicht.
Ich weiß nicht.
Ich weiß nicht.
Ich weiß nicht.
Ich weiß nicht.
Ich weiß nicht.
Ich weiß nicht.
Ich weiß nicht.
Ich weiß nicht.
Ich weiß nicht.
Ich weiß nicht.
Ich weiß nicht.
Ich weiß nicht.
Ich weiß nicht.
Ich weiß nicht.
Ich weiß nicht.
Ich weiß nicht.
Ich weiß nicht.
Ich weiß nicht.
Und dann hätte ich mir doch die Anleitung angucken sollen.
Home Assistant, Install VMware.
Ja.
Aber was brauche ich für Optionen dabei?
Ich gehe weg diese komischen Anleitungen.
Nein!
VMDK.
Hier.
Da steht es doch irgendwo.
OK.
Vier GIG RAM.
64 GIG.
OK.
Alles klar.
Hypervisor Specific.
VMaa Workstation.
Ja, dann machen wir das doch mal.
Neue VM anlegen.
Zack.
Zack.
Wir installieren gar nicht.
Wir machen hier...
Was sollen wir auswählen?
Das da stand da, glaube ich.
HA.
Eine CPU, vier Kerne.
8 GB RAM.
Wir haben genug.
NAT Bridge.
Bridge.
Ja, der Rest ist eigentlich...
Ja, wir haben doch alles mehr oder weniger korrekt eingestellt.
Use Bridge Networking.
Das da, das da.
Use Existing Virtual Disk.
Desktop.
Ich keepe mal das Existing Format.
Man weiß ja nicht.
USB Controller brauche ich auf jeden Fall.
Weil ich muss gleich einen ZigBee Stick passtruhen.
Okay, schauen wir mal, ob das kommt.
So, Moment.
Der Haas muss verspeist werden jetzt.
Bevor wir Broggerstells anfangen.
Boah, das ist ganz schön fettes Ding, ey.
Ich glaube, den kann ich jetzt nicht alles essen.
So.
Ah.
Ey.
Warum startet das nicht?
Was?
Was ist da falsch dran?
Was habe ich falsch gemacht?
Was soll ich machen?
Ich soll...
Ah, ich muss die VM auf EFI umschalten.
Aha.
Geht das nicht.
Ging das nicht.
Mittlerweile.
Sogar über eine Option.
Ja.
Da muss ich auch kein Textdatei mehr editieren.
Ah, guck mal.
Oder?
Jetzt startet es auch.
Nice.
So.
Oh.
Der fällt voll auseinander.
Pippo Fat Time.
Okay.
2.130.
Also, 2.130.
Nein, nein.
Äh, nee.
Home Assistant hat was für einen?
Port 888123 oder sowas, gell?
Ja.
Das Ding schmeckt nicht schlecht.
20 Minuten, das braucht 30 Sekunden, ja.
Bau nach dem Streamer in Discord.
Ich kann auch jetzt in Discord gucken.
Pause Champ.
Hast du einen zweiten ZigBee-Stick?
Ja.
Eigentlich will ich den als ersten ZigBee-Stick verwenden.
Weil der neuer ist.
Das ist so ein neuer Sonoff-Stick.
Mit diesem neuen, gehypten Chipsatz, den sie alle verwenden wollen.
Okay, PN.
Sekunde.
Wobblos.tv ist abgelaufen.
Das ist schlecht.
Äh.
Habe ich da was verpeilt?
Nicht, who am I, who is.
Habe ich da was verpeilt?
Rake your wick.
Okay, es liegt noch bei Namecheap.
Ich vermute, ich kann den Kram, ich vermute, ich kann den Kram verlängern nachher.
Ja.
Sonst habe ich es verkackt, äh.
Okay, Home Assistant is ready.
Oh ja, ich bin gerade noch am Osterhas futtern.
Also, äh, create my smart home, username, admin.
Super secure Passwort.
Ihr kommt nicht drauf, welches es ist.
Amsterdam, korrekt.
Country, na komm, Mama macht gerne mal nie.
Übrigens, wisst ihr, was ich geil finde?
Dass man hier einfach die Leiste aufmachen kann und tippen.
Das geht einfach im Windows-Installer nicht.
Und ich verstehe bis heute nicht, warum man das nicht hinbekommt im Windows-Installer.
Nix.
Nein, auch kein Chromecast einbinden.
Oh, guck mal.
Guckt gerade wieso.
Äußerst interessant, das wollte ich jetzt schon immer mal wissen.
Wie kann man den Kram wegmachen?
Da sehen wir jetzt auch gleich, die guckt bestimmt gleich Dings hier, ähm.
Rosamunde Pilcher oder sowas.
Ähm.
Warte mal, man muss das doch umschalten, dass man das editieren darf, diesen ganzen Kram.
Das war doch super weird-champ-ig.
Erstmal müssen wir in Advanced-Mode schalten.
Ja, Advanced-Mode, richtig.
Und dann, ich hab vergessen, wie das funktioniert.
Man musste diesen Dashboard-Müll erstmal ausschalten, dass man editieren darf ordentlich.
Raw Config Editor.
Ah, nee, Take Control.
Da stand's doch.
Das muss man machen.
Take Control.
Ja, Start Empty Dashboard.
Perfekt, done.
Done.
Excellent.
So, nice.
Nice.
Add-ons.
Jetzt brauchen wir ZigBee, das ZigBee-Add-on.
ZigBee to MQTT.
Your Home Assistant.
Warum nicht das eingebaute ZigBee?
Weil das kompatibler ist.
Äh.
Okay, ich soll MQTT installieren, das mach ich.
Das ist auch eine gute Idee.
Wie installiert man den Kram-Pil denn jetzt nochmal?
Add-on?
Wo ist denn das Add-on?
Nutzt ZHA nicht.
Inzwischen auch die ZigBee-to-MQTT-Dinge.
Ja, ey, wir können's ausprobieren.
Wir können das ausprobieren.
Ist gar kein Ding.
Können wir machen.
Warum nicht?
Machen wir ZigBee an.
Zig.
ZigBee.
Ach so.
Moment, nein, nein.
Das ist sicherlich der falsche Serial-Port.
Kek, wait.
Moment.
Ich muss ja mal den USB-Stick da dran stecken.
Den ZigBee-USB-Stick.
Ja.
Sonoff-Stick.
Stick, der Stick-Champ.
Brum.
Brum.
Connect to Home Assistant.
Ja.
ZigBee-Stick ist durchgereicht.
Dann probier's doch mal damit aus, wie gut der Kram jetzt funzt hier.
Da, hier, den da.
Dev-DTY-USB-0.
Sonoff-ZigBee-3.0.
USB-Dongle.
Sonoff-ZigBee-3.0.
USB-Dongle-SN-0001-Silicon-Labs.
Alles klar, den wollte ich schon immer haben.
Das war wichtig, da ich das vorgelesen hab.
Sonst hätte es nicht funktioniert.
Ich hoffe, das funktioniert hier mit USB-Path-Through.
Anscheinend, anscheinend.
Easy, easy.
Select the Serial...
Ne.
Ah ja.
Erase Network Settings and create new network.
Korrekt.
Das will ich machen.
Das wird immer ein Test-Stick.
Der wird immer neu formatiert.
Kann man das überhaupt formatiert nennen?
Immer neu initialisiert.
Du-Du-Du.
Du-Du.
Du-Du.
Morgen muss ich wieder arbeiten.
Und eigentlich hab ich keinen Bock, nach dem Urlaub immer arbeiten zu gehen.
Aber es war nur ein Tag Urlaub, also hält's den Grenzen.
Mir gefällt's da echt ganz gut.
Wie ist Home Assistant bei dir installiert?
Testweise in der VM hier.
Was initialisiert denn der da eigentlich drei Stunden jetzt?
Funktioniert das mit dem Stick-Durchreichen doch nicht?
Pause Champ.
Ah, Success.
Und ansonsten daheim...
Auf meiner Unraid-Kiste.
Oh, hier gibt's Chat.
Hier gibt's Chat-Gel wieder.
Hyper-Chat-Gel.
Der Ja-Boy-Pedder sagt, dank dir bin ich auf den Informatikor-Trichter gekommen und mach jetzt meinen Master fertig.
Nice.
Exzellent.
Exzellent.
Das ist extrem...
Nice.
Ja, eigentlich wollte ich ein Fazit-Video machen, ein Jahr neuer Job.
Weil es ist seit heute, ohne Scheiß, heute auf den Tag genau ein Jahr, wo ich den Job gewechselt hab.
Nein, gekündigt hab ich schon Mitte Dezember.
Oder Ende Dezember 2022.
Aber aufgehört und dort angefangen hab ich tatsächlich erst am 1. April.
Letztes Jahr.
Ein Jahr, ja.
Platz auf den Tag heute.
Quasi heute Morgen um 8.30 Uhr vor einem Jahr hab ich da angefangen.
Okay, es ist successful, sagen sie.
Der gehört zu keiner Area.
Der ist einfach so successful.
Konfiguriert.
Already configured.
Okay.
Add devices via this device.
Okay, Leute, wir testen jetzt mal schnell die Lidl-Steckdose.
Was haltet ihr davon?
Wollen wir mal schnell mal die Lidl-Steckdose testen und gucken, ob die ZigBee-Sachen prinzipiell
funktionieren?
Ich wollte die eigentlich auseinandernehmen und einen neuen...
Mal testweise das Motor drauf flashen mit einem eigenen Chip, aber einfach nur just
for fun.
Ansonsten benutzen wir die nicht mit ZigBee.
Also, wir können das mal kurz testen.
Also, wir können das mal kurz testen.
Also, wir können das mal kurz testen.
Also, wir können das mal kurz testen.
Also, wir können das mal kurz testen.
Also, wir können das mal kurz testen.
Ob das funktioniert.
Dass wir auch wissen, dass die...
Dass die ZigBee-Integration...
tut.
Davor muss ich immer noch den Osterhas fertig futtern.
Ja.
So sieht's aus.
Ach, du!
Du hast länger ausgehalten.
Also, ich kann's echt nur empfehlen, wenn einem was auf den Sack geht, sich was Neues
suchen.
Es hat sich im Nachhinein schon geändert.
Ich habe es echt nur noch mal geschaut, wie es aussieht.
Ich habe es auch noch mal geschaut, wie es aussieht.
Aber es ist echt...
Es ist echt...
Es ist echt...
Es ist echt...
Es ist echt...
Das ist echt...
Das ist echt...
Das ist echt...
Das ist echt...
Das ist echt...
Das ist echt...
Das ist echt...
5 bis 10 Jahre...
oons bin schon...
...son character...
Born sei ein man...
starsin geh machen...
...tens des...
Als ich hari...
Jetz...
...dann...
Jetz...
...cho 언 kann es sein第一.
Ist so ein Synchro, dass ich...
Wo es wohl
Was kosten die smarten Steckdosen vom Lidl?
Moment.
29 Euro.
Die hier ist das.
Die schließe ich jetzt mal an.
Guck mal, ob es funktioniert.
Wo habe ich denn die Kisten liegen?
Hier, Sekt.
Packen wir die mal aus.
Dass wir wissen, ob die...
Ob die Zigbee-Integration wirklich funzt.
Ich mache mal auf.
Wir werden mit dem Zigbee-Gerät heute bestimmt fertig werden.
Deswegen ist es gut, dass wir ein ordentliches Setup am Start haben.
Wo man das dann auch ordentlich ausprobieren kann.
So.
USB-Steckdosenleiste.
Spezial.
Super advanceder Shit.
Nicht einfach nur Steckdosenleiste, Steckdosenleiste.
Spezial.
Hat leider nur drei Stecker im Vergleich zu meinem alten.
Das ist ziemlich sätge.
Jetzt müssen wir mal gucken, wie man das Ding pärt.
Ich habe nicht damit gerechnet, dass ich das heute mache.
Deswegen habe ich auch keine Kamera und sowas am Start.
Sonst könnt ihr zugucken.
Aber das geht jetzt nicht, weil ich habe ja da gar keine Steckdosenleiste.
Ich kann mein Ring-Light nicht anmachen.
Ich kann dort nichts anschließen gescheit.
Also mit der Steckdosenleiste vielleicht jetzt gleich.
Gehst du dich zu den Ausnahmen, die bei deutschen Unternehmen Ami-Niveau verdienen?
Ich meine mich dir nur, dass du verdienst.
Also Ami-Niveau verdiene ich nicht.
Die Amis verdienen ja, was weiß ich, 300k oder so im Jahr.
So viel ist das bei mir nicht.
So, Steckdosenleiste.
Steck das jetzt mal rein.
Jetzt.
Vielleicht sollte ich mir...
Vorher mit euch mal zusammen angucken.
Lidl.
Lidl Steckdosenleiste.
Zigbee.
In dem Handbuch-PDF, wie man das Ding pärt.
Also die, die 300k verdienen, die sind nicht arm bei den Amis.
Die sind höchstens arm, wenn sie mal ins Krankenhaus längere Zeit müssen.
Hat Lidl vielleicht hier ein PDF bei sich auf der Webseite?
Handbuch oder sowas?
Haben die sowas nicht hier auf ihrer...
PDF?
Bedienungsanleitung.
Ach, nicht Spezial.
Ich hab da Spezial gelesen.
Da steht...
Ich hab irgendwie so aus dem Augenwinkel das als Spezial interpretiert.
Was ist das für eine schrottige...
Alter, mega Schrott-Seite.
Gibt's das auch...
Gibt's das auch zum Download irgendwo?
What?
Herunterladen.
Alter, was...
Was ist das für eine Seite, Mann?
Was ist das für eine Seite, Mann?
Was ist das für eine Seite, Mann?
Was ist das für eine Seite, Mann?
Anleit...
Das ist doch Scam, oder?
Lade ich jetzt irgendein Virus runter?
Nee, mach ich nicht.
Okay.
Das sieht einfach nur noch Scam aus.
Das ist aber kein Scam.
Das ist aber kein Scam.
Außerdem, ich bin eher unter Linux in der VRM.
Da kann mir ja eh nichts passieren.
Also, USB-Steckdosenleiste, Kurzanleitung.
Diese Kurzanleitung ist fester Bestandteil der Bedienungsanleitung.
Diese Kurzanleitung ist fester Bestandteil der Bedienungsanleitung.
Moment.
Es gibt nur die Kurzanleitung.
Es gibt nur die Kurzanleitung.
Sie benötigen...
Okay.
Bestimmungs...
Bla, bla, bla, bla.
Ich will wissen, wie man das paart ordentlich.
Sie benötigen eine...
Brauch ich...
Hä?
Das ist eine ZigBee-Steckdosenleiste.
Da brauch ich keinen 2,4 Gigahertz-WiFi-Router.
Okay.
Wie auch immer.
Ich muss einfach nur wissen, welche Knöpfe ich drücken muss zum Paaren.
Hä?
Jetzt bin ich hier sehend.
Ach so, das sind die unterschiedlichen Steckdosen-Sorten.
Okay.
Produkt und Mobilgerät koppeln.
Nein!
Ich will die ZigBee-Sache Lidl Home installieren.
Ja, sind die denn geistig komplett durch, oder was?
Okay.
Einschalten.
Vier drücken.
LED...
Bereit zur Kopplung.
Okay.
Also.
Ich muss...
Produkt mit Steckdose verbinden.
Einschalten.
Drücken.
LED 5 leuchtet.
Okay.
Wo ist LED 5?
LED 5.
Aha.
Die andere Seite.
Ja.
Okay.
Also, ich denke...
Ich hoffe doch, dass es einfach funktionieren wird.
Add devices via this device.
Okay.
Auf geht's.
Steckdosen-Leisten-Champ.
Aha.
Easy.
Kann man dazu sagen.
Easy as fuck.
Device name.
Alles klar.
Backlight-Mode?
Power-State?
Backlight-Mode?
Okay.
Und wie akzeptiere ich das jetzt?
Hat es das jetzt automatisch hinzugefügt?
Ist das jetzt automatisch drin, oder?
Nee.
Nee.
Ah, es hat mich aus irgendwelchen Gründen gerade wieder ausgelockt.
Alter.
Home Assistant.
Was?
Alter, geh mal nicht auf den Sack.
Okay.
Okay.
Okay.
Okay.
Okay.
Okay.
Okay.
Okay.
Okay.
Okay.
Okay.
Okay.
Okay.
Okay.
Okay.
Okay.
Okay.
Okay.
Okay.
Okay.
Oh, komm, mach mal nicht auf den Sack.
Was willst du dann?
Integrations.
Zwei Devices.
ZigBee.
Hier, da ist die Steckdosenleiste.
Okay, dann schauen wir doch gerade mal, ob das funktioniert.
Ja.
Okay.
Easy.
Hört ihr das?
Hört ihr das hier?
Klick.
Klick klick klick klick klick klick klick klick.
Hört man das?
Also, die Relays.
Weiß ich wie stabil die sind.
Ich lasse das mal sein.
Gut.
Also, Steckdosenleiste Funzt.
Nicht, dass wir die Steckdosenleiste brauchen.
Aber ich weiß jetzt, dass man ZigBee-Stick funzt.
Was haben wir denn sonst noch?
Ja, die sind einzeln.
Das ist doch der Grund, warum ich mir das Teil überhaupt gekauft habe.
Sonst könnte ich auch einfach eine normale Zwischenstecker nehmen,
den ich steuern kann über WiFi oder ZigBee
und eine andere Steckdosenleiste reinstellen.
Leider kann man die USB-Dinger nicht an- und ausschalten einzeln.
Das ging bei der alten, die ich hatte.
Dafür war die alte auch super schlechte China-Chinesen-Qualität.
Wobei, die hier ist 100% auch made in China.
Lass uns gerade mal gucken.
Die ist... steht gar nicht drauf.
6 Ampere maximal.
Das ist aber nicht viel für drei Steckdosen.
Darf das überhaupt verkauft werden?
Ist das überhaupt zugelassen, eine Steckdosenleiste, die maximal 6 Ampere kann?
Dass sie nicht mindestens 10 oder 16 oder so kann?
Die Relays können nicht mehr schalten.
Ja, was ist, wenn die nicht mehr schalten?
Wenn ich jetzt einen Heizlüfter dran hänge?
Dann?
Monka Smoke oder was?
Na gut, für meine Sachen ist das ja ausreichend.
Okay, was machen die anderen Sachen hier unten?
Power on state, last state.
Light went on, light went off.
Okay, Leute, diese Settings hier machen einfach gar nichts.
Die sind einfach useless.
Oder braucht es eine Weile, bis das...
Zynkt vielleicht.
Das interessiert das überhaupt nicht.
Ist aber auch wurscht, ob das geht oder nicht.
Identity Press, was macht das denn?
Blinkt das jetzt oder so?
Also ich sehe hier nichts.
Okay, wir können noch Empfangsstärke und so einstellen.
Also hier passiert nichts, wenn ich da drauf presse.
Aber wie dem auch sei, unser ZigBee-Zeug funktioniert.
Das ist eigentlich alles, was ich brauche für heute.
So.
Excellent.
Müssen wir uns jetzt eine Runde C++ geben.
Ich habe...
Ich habe schon wieder keinen Bock.
Wir machen das übrigens in Visual Studio Code.
Rider spackt nur rum.
Ich habe das heute Morgen nochmal ausprobiert.
Ich habe es zwar hinbekommen, dass Rider nicht mehr das Bild jedes Mal neu hinstellt,
aber ich hätte es nicht für möglich gehalten, die ganze Navigation, also Symbole finden und sowas.
Ist in Visual Studio Code tatsächlich besser?
Main, Main App.
Ah, beste.
Gut.
Dann schließen wir mal...
Oh, ich habe jetzt ja gar keinen Platz.
Äh.
Ich brauche mal einen USB auf USB-C Stecker für den Controller.
Sonst wird das nichts.
Weil vorne am Gehäuse ist nichts mehr frei.
Nur noch USB-C auf USB-C.
Was war das gerade für eine Adresse?
Wubblurz.
Bum, bum, bum.
So, hat er das jetzt verbunden?
ZigBee-Dongle?
Hier.
Connect.
Unsuccessful?
Was?
Ne, das ist das Fall.
JTAG will ich.
Hä?
Das ist überhaupt nicht zu einer anderen VM connected.
Lüg hier nicht rum.
Stimmt überhaupt nicht, dass du zu einer anderen VM verbunden bist.
Hä?
Warum ist das unsuccessful?
Spackt der irgendwie rum, weil USB-C oder so?
Ja, dann ziehe ich halt den Sonoff-Stick raus.
Den brauchen wir jetzt eh nicht.
Erst bis wir was programmiert haben.
Und stecke es da rein.
Was ist denn da schon wieder kaputt?
Das liegt aber bestimmt an VM, ja.
Ich habe vorne am Gehäuse nicht genug Platz.
What the fuck?
Oh, Leute, ich weiß, woran das liegt.
Könnte das sein, dass auf meinem...
meinem anderen Windows-Account noch die VM offen ist und es da noch durchgereicht ist?
Grabt sich VM wirklich die Sachen, wenn im anderen Account noch eine VM im Background offen ist?
Das wäre ja was, äh...
Ja gut, kein Ding.
Dann schießen wir die andere VM einfach ab.
Keck, wait.
Prozess-Explorer.
Als Admin starten, weil ich logge mich jetzt bestimmt nicht aus und auf meinen anderen Account ein.
Prozess-Explorer am Start.
So, VM-Ware.
VM-Ware.
Zack.
Zack.
Schieben wir mal ab.
Ich weiß ja nicht, welches welches ist.
Okay, hier ist VM-Ware.
Ist weg.
Leak.
Was habe ich geleakt?
Alles liegt.
Alles liegt.
Fuck.
Oh man, was wollte ich denn da jetzt abschießen?
Hier.
Ähm.
Welches?
Okay.
C-Doppelpunkt-User-Stream-V...
Ja, ist gut.
C-Doppelpunkt-Stream-Max-Stream-VM.
Das ist die, das ist die andere.
Ah, jetzt habt ihr es auch gehört, das hat es gemacht.
Blublum, blublum.
Jetzt hat es funktioniert.
Jetzt hat es funktioniert.
Sehr schön.
Und ich wette mit euch, jetzt geht das auch per USB-C.
Probieren wir nochmal aus.
Wenn du dich umloggst, das unter deinem User...
Du meinst, dass ich zwei User habe?
Ist Leak.
Krass, Leak.
Monka ist Leak.
Ja, okay, hat funktioniert.
Ne.
Logge den anderen Account aus.
Das ist für Noobs.
Vor allem, wenn wir Prozess abschießen, ist viel nicer.
Sudo.
Ah, ich kann jetzt schreiben.
Hat er das jetzt erkannt?
Jawoll.
Okay.
TMP, ESP32, Hello World,
Example, mehr läuft da noch nicht drin.
F.
So.
Ich habe heute Morgen nämlich schon ein bisschen rumgebastelt,
weil mich das so genervt hat,
dass die Konsolenausgabe nicht funktioniert.
Ich habe jetzt was gefunden,
wo die Konsolenausgabe ordentlich funktioniert,
auch wenn man Arduino da drauf verwendet.
Fragt bitte nicht, was es funktioniert.
Einfach.
Okay, also als erstes müssen wir dieses tolle Ding hier starten.
Aber ich habe Minicom nicht installiert.
Na dann.
Alles Minicom.
So, erst mal müssen wir diese obskure Sache hier starten.
Dann connectet er sich zu dem Controller und man sieht meine geistig sehr advancede Ausgabe,
die ich da einprogrammiert habe.
Endlosschleife Keckel.
Und hier unten können wir jetzt beispielsweise,
machen EDF Pi Flash, so und damit das geht,
muss ich vorher sagen, kill, anders funktioniert es nicht.
Ich kann es euch, ich kann es euch sagen.
Ich, also davor muss ich Minicom killen und danach kann ich flashen und das funktioniert ordentlich.
Super weird, ich weiß.
Aber alles andere war also richtig nervig.
Der eingebaute Monitor funktioniert nicht richtig.
Mit einem Serial Terminal hast du das Problem,
dass wenn der flasht,
das Serial Terminal weiterhin drinnen liest.
Also es ist total ätzend gemacht.
So, jetzt muss der erst mal wieder alles kompilieren.
Dauert zwei Stunden.
Und ihr werdet jetzt sehen, sobald der anfängt zu flashen,
hört das hier oben auf.
Also verbindet sich nicht mehr.
Also ich zeige euch mal.
Das ist eigentlich ganz, ganz pfeiffertig gemacht.
Also ich habe mir das heute Morgen so aus den Fingern gesagt.
Also, das ist Endlosschleife.
Der guckt, ob der Flash-Prozess läuft.
Wenn der Flash-Prozess nicht läuft,
dann startet der Minicom auf die serielle Interface,
wo die Konsolenausgabe von dem Controller ist.
Egal was passiert, danach resetet er das Terminal,
dass es nicht rumbuckt.
Und dann sleept er einfach mal eine Sekunde,
dass es nicht in der Endlosschleife hängen kann,
wo ein CPU-Core ausgelastet wird.
So, und jetzt kann ich das hier, jetzt kann ich das starten.
Und jetzt ist es einmalig kaputt.
Weil noch das Arduino-Zeug vom letzten Mal drauf war.
Sehr schlau, Max.
IIQ-Shit.
Und nochmal rausziehen.
Und nochmal reinstecken.
Jetzt können wir nochmal flashen.
So, und jetzt.
Was ist denn jetzt schon wieder?
Was ist jetzt?
Funktioniert ja erstklassig.
Ey, warum funzt denn das jetzt nicht?
Rausziehen nochmal.
Und mal rein.
Ah, ich weiß, warum das nicht funzt.
Weil da immer noch diese blöden Optionen gesetzt sind.
Die, dass das Arduino-Zeug komischen Kram macht.
Oder auch nicht?
Wo habe ich denn das gesetzt?
Hier?
Nee.
Äh.
Oh fuck.
Hier? Irgendwo?
Oder habe ich das doch nicht mehr gesetzt?
Hatte ich das?
USB-Mode.
Und das Auto-Complete geht auch nicht mehr.
So, was ist denn jetzt hier gerade kaputt?
Ich habe das falsche Profil.
Ich muss Profil laden.
Ich habe die letzten...
Profil-IoT muss ich laden.
Ja, dann klappt das schon besser.
Und jetzt muss ich noch die C++-Extensions installieren.
Die 9 Millionen installiert sind.
Weil ich habe gestern ja meine Visual Studio-Code-Profile weggeschmissen.
Was sehr schlau war.
Im Nachhinein.
Ich glaube...
Ich glaube, jetzt indiziert er gerade.
Ja, jetzt hat er es erkannt.
Okay.
USB-Mode.
Es ist auf Null.
Okay, dann verstehe ich nicht, warum das Ding die ganze Zeit abkackt.
Ich muss auf jeden Fall sagen, Init Arduino, sonst geht es nicht.
Irgendwas hat...
Ey.
Visual Studio-Code?
Was formatierst du da für komische Dinger?
Okay, Flash.
Dachte ich mir, ich kann es euch zeigen.
Easy.
Aber ich hoffe, das sollte jetzt tun.
Reset.
Alter!
Warum ist das jetzt kaputt?
Warum kommt da jetzt in der Ausgabe nichts mehr raus?
Okay, dann machen wir hier...
Log W.
Ja, ist doch...
W, okay.
Blub.
Eins, zwei, drei.
Der sollte jetzt eigentlich eine Log-Ausgabe machen.
Der macht aber gerade gar nichts.
Aber er lässt sich flashen.
Das heißt im Endeffekt, dass er dran ist.
Ach.
Alter.
Ich bin dumm.
Ja, ihr habt recht.
Ich führe das nur einmal aus.
Ja, kein Wunder, dass es nicht funktioniert, ey.
Ja.
Gut erkannt.
Keck weh.
So.
Jetzt aber, hm?
Ja.
Ja, jetzt kommt da auch Zeug raus.
Oh, jetzt kann ich meine Pfeifeller-Schleife starten.
Jawoll.
Jetzt passt.
Guckt.
Und jetzt...
Und jetzt kann ich flashen.
Dann hört das da oben auf.
Flasht.
Und nach dem Flaschen verbindet es sich wieder und macht weiter.
So soll das sein.
So.
Und jetzt habe ich noch was.
Ich habe das übrigens wieder sein lassen, dass man mit Arduino...
Also mit Arduino printet man normalerweise so auf die Konsole.
Aber das backt richtig rum.
Und ich kann euch auch zeigen, warum.
Weil...
Das kacke programmiert ist.
Guckt mal.
Der ruft unter der Haube diese Funktion hier auf, wenn Arduino versucht sein Serial...
Seine serielle Konsole zu initialisieren.
Also das macht er unter der Haube.
Das habe ich nachgeguckt.
Und da drinne...
Steht das hier.
HW Serial Pins needs to be de-inited in order to allow Serial to work.
Sadge.
Also das ist alles richtig initialisiert.
Dann trennt er die USB-Verbindung nochmal und stellt sie wieder her.
Und das bringt alle möglichen Tools durcheinander.
Weil das Device mal kurz für 10 Millisekunden weg ist und wieder erscheint.
Das bringt alles durcheinander.
Deswegen habe ich das jetzt einfach sein gelassen mit Arduino und Serial Printline.
Sondern ich verwende einfach das eingebaute Logging von ESP.
Beziehungsweise ich habe mir überlegt.
Wisst ihr was wir auch verwenden können?
Was eigentlich eine mega nice C++ Library ist.
Also dass ich sowas sage.
Ihr wisst ich bin der krasse C++ Liebhaber.
Ja normalerweise.
fmtlib.
Kennt ihr das?
Also für alle die es jetzt falsch verstanden haben.
Ich bin immer am flamen über C++.
Und auch zu Recht.
Aber die Library ist wirklich ganz nice.
Die haben nämlich versucht die Format Strings von Python nachzubauen für C++.
Da kann man jetzt sowas hier machen drin zum Beispiel.
Guckt.
Ähm.
Hier.
Format.
Und dann hier mit diesen geschweiften Klammern.
Die haben sich endlich mal.
Endlich.
Endlich.
Ja.
Hat sich in der C++ Welt mal einer gedacht.
Wir gucken uns was bei einer gescheiten Programmiersprache ab.
Und versauen es auch nicht bei der Umsetzung.
Dass dann wieder was rauskommt was viel beschissener ist.
Und ich habe gesehen.
Das ist den ganzen Kram sogar.
Als.
Fertige.
ESP.
Verpackte.
ESP EDF Library gibt.
Das braucht man nicht wirklich.
Man kann einfach den Git.
Den Git.
Ordner klonen in das richtige Verzeichnis.
Aber wenn man das über den eingebauten Package Manager machen kann.
Von ESP.
Warum nicht.
Ja.
Machen wir jetzt einfach mal.
Adden wir jetzt.
Gucken uns das ganze an.
Das heißt.
Wir machen jetzt FMT.
Ne.
Er findet es nicht.
Warum?
Weil.
Ich.
Das nicht.
Included.
Habt.
Ja.
Ja.
Ja.
Ja.
Ja.
Ja.
Vermutlich.
FMT
Muss ich erst bilden?
Eventuell.
Wahrscheinlich muss ich erst bilden.
Das heisst checkt.
Was created zwischendurch immer die auf.
Manchmal so eine,
so eine Zeile hier oben durch.
Diesem nachher.
Okay, jetzt schon wieder.
Das Problem ist ich jetzt macht.
Log output.
Woher?
Da kann ich gar nicht durchbeschleunigen.
Soviel auch hier.
Aber es doch.
Es ist nicht Хорошо.
Was hat er?
The following task you will see is not to reset the Watchdog-Timer.
Ach so, ja.
Weil ich eine Endlosschleife Print habe.
Das mag der nicht so gerne.
Da kann der nichts anderes machen.
Also mit einer Endlosschleife Print
kannst du beispielsweise kein WiFi benutzen.
Weil der eben nicht...
Weil der nicht genug CPU-Zeit
frei hat für WiFi und ZigBee.
Das müssen wir dann anders machen.
Aber ich meine, ich werde auch keine Endlosschleife
Print im fertigen Projekt laufen haben.
So.
Jetzt habe ich das gebildet.
Hat er jetzt gecheckt, dass FMT-Lib da ist?
Ha, hat er nicht.
Warum nicht?
Er hat das doch installiert, oder?
Managed Components?
Ne, hat er nicht. Hat es nicht funktioniert.
Endlosschleife ist auch
undefined behavior, korrekt.
Ähm.
Wo ist es denn?
Sollte ich vielleicht mal ein cleanes Bild machen?
Oder so?
Komm, wir machen mal ein cleanes Bild.
Manifest Files have changed.
Solving dependencies. Ja, mach mal.
Heißen die Header-Files anders?
Welche?
Ne, die heißen FMT. Das weiß ich, was die FMT heißt.
Ich glaube, ich muss einfach
ein neues Bild machen und dann ist gut.
Bückt ihr die automatisch hinzu?
Ich gehe davon aus,
ehrlich gesagt, wenn es über den offiziellen
Library Manager installiert werden kann.
Weil ansonsten ist die Frage,
was ist der Vorteil von dem offiziellen
Library Manager versus Git-Clone?
Ich benutze C++23,
aber leider
sind die ziemlich pepega
und die haben
FMT. Ach hier, jetzt hat er es gefunden.
Die haben das nicht in der Standard-Library
mit drin. Obwohl sie
C++23 unterstützen.
Die unterstützen FMT nicht.
Oder wie heißt das? Standard-Format
heißt das, gell? Haben die nicht drin.
Noch nicht mal, noch nicht
mal unter. Das ist halt
wieder die Scheiße. Da komme ich jetzt wieder ins
Renten. Das ist halt wieder die Scheiße.
an C++-Standards.
Es gibt zwar einen Standard, der ist aber so
dreckig mies,
dass keiner sich dran hält.
Was ich auch verstehen kann.
Weil das sind nicht mal die Typen selbstwissend, die den Kram sich aushacken,
was da eigentlich Sache ist.
So, genug aufgeregt.
Wie es besser geht,
und ich hätte nicht gedacht, dass ich das mal sage,
sieht man bei JavaScript.
JavaScript hat immer noch ganz viel furchtbare
und wirre Sachen, aber die Sprache ist
kontinuierlich besser geworden die letzten Jahre.
C++ ist einfach nur immer wirrer geworden.
Äh, FMT.
Hier, Printf.
Können wir das da mal includen.
Und da kann man jetzt sagen, hier, anstatt
SMP-Log kann man da zum Beispiel sagen,
FMT, Printf.
Joa, keine Ahnung.
0,
0, 1.
Oder so.
Wobei man nicht mal Printf sagen muss, sondern irgendwas.
So, jetzt flashen wir das Ganze mal.
Flashchamp.
What?
Alter, was?
Der ESP32.6 hat ein ZigBee-Modul
dabei, ja? Das ist auch der einzige Grund,
warum man sich das Ding kauft.
Was möchte es mir sagen jetzt gerade?
Die Musik ist zu laut gerade.
Die Playlist ist
schlecht gemacht.
Die positive, das, okay.
Das positive Beispiel,
obwohl du es nicht hören wollen willst, ist Java.
Da ist man bis zur ersten Version so gut wie
abwärtskompatibel, also bringt es so langsam mehr
Qualität. Also das Problem ist,
dass Java immer noch eine Kack-Sprache ist.
Trotzdem Verbesserungen.
Aber du hast insofern schon recht,
die haben es auch auf die Reihe
gekriegt, die Sache besser zu machen.
Go ist auch ein ganz gutes Beispiel.
Die haben auch ein paar Sachen
verbessert, was richtig abartig war.
Wobei ich immer noch nicht verstehe,
wer sich diese Generic-Implementierung ausgedacht
hat, oder diese
Generic-Umsetzung und dann gedacht hat,
ja, das ist geil, das muss da rein.
Also, was ist denn hier das Problem jetzt?
Ach so, ich glaube, das liegt daran,
weil ich das vor Arduino, äh,
nach Arduino, äh, included habe.
Das ist auch so ein Ding. Dieses Problem hast du
nur in C++ so einen Scheiß.
Nur. Reihenfolge von
Header-Includes. The fuck, Alter.
Wir sind im Jahr 2004, guck,
jetzt funktioniert's. Wir sind im Jahr
2024, Alter. Da ist
seriously, die Include-
Reihenfolge macht was aus.
Das ist einfach
so hirnverbrannt und dämlich
und asozial, diese Sprache, ist unglaublich.
Also, was ist,
was ist denn jetzt, äh, warum printet
er das jetzt nicht richtig? Habe ich das hier
falsch gemacht? Sollte er nicht eigentlich,
glaube ich, macht das falsch.
Vielleicht muss man auch gar nicht printf machen.
Kann man print, printeln oder sowas?
Gar nicht sicher, wie man das überhaupt
benutzt. Boah!
Alter, wie fett ist
What the hell?
Wie fett jetzt, jetzt geht's, wie
fett ist denn meine Firmware auf einmal?
Alter,
so groß habe ich
die Library, aber,
ich werde doch nicht
die Hälfte meines Flash-Speichers
verschwenden, dafür, dass ich eine ordentliche
Logging-Library oder eine Format-Library
verwenden kann.
The fuck? Guck mal, okay.
Also, die Firmware ist
gerade
430k. Mein Flash,
ohne Mist, mein Flash ist 520k
groß. Ich habe, ich habe
jetzt noch
90k frei für mein eigentliches
Programm.
Das kann es ja nur wirklich nicht sein.
Also, 430k
und jetzt kommentieren wir das mal aus.
Ich hoffe, C++ ist so schlau und checkt das, wenn ich das
auskommentiere, dass er es dann nicht
einkompiliert. Deswegen ist
FNT Standard, ja, das kann schon sein, ja.
So, mal gucken.
Wie jetzt?
Oh, Flashchamp.
Warum genau ist das jetzt kaputt?
Ah, weil ich eine Endlosschleife habe, die nichts
macht. Das mag der gar nicht.
Das, das mag der gar nicht.
Da hat er was,
dagegen. Okay.
Guck mal.
135, aber das ist immer noch
ganz schön viel. Warum ist das denn so
fett?
Warum ist meine Firmware so groß?
135k?
Vielleicht ist es, es ist nichts,
es ist nichts dabei.
Das verstehe ich jetzt aber nicht wirklich.
Ist nichts dabei, ist nichts
included?
Warum ist es so dick?
So fett?
Ist OS,
an. Ich habe die Default-Settings vom
Projekt, also ich denke mal,
ist alles so, wie es sein muss. Aber so
fett habe ich das eigentlich nicht in Erinnerung.
Vielleicht doch.
Doch, ohne Mist, doch, ich glaube
schon. Ich meine, wir dürfen es nicht vergessen.
Da ist USB-Zeug mit dabei,
WiFi-Zeug mit dabei, ZigBee-Zeug
mit dabei, wobei das alles nicht benutzt wird.
Doch, das kann schon sein, dass die Base
für 135k ist.
Da ist AirToss dabei.
Doch, doch, doch, ich glaube,
das kommt hin. Ich glaube, das kommt hin.
Aber trotzdem, das ist ja ein mega krasser
Unterschied. Guck mal hier.
Das ist die Logging-Library,
die 300
Kilobyte, ey,
das kann doch so nicht gewollt sein.
Kannst du einen Link posten, klar.
Ja, Musik-Link.
Ich höre das gerne,
sowas, das ist mega entspannt.
FMT-Lib,
Reduce Size. Da kann man
bestimmt irgendwelche obskuren
Compile-Flags
oder so setzen.
Reduce Binary Size, Reduce Library Size.
Das klingt doch schon mal gut.
Was?
Hier gerade schmeißt
den Kram raus. Was?
Kann man das aufmachen?
Äh.
Was bin ich hier sehend gerade?
Der Link ist broken. Ja, würde ich auch sagen.
Kann man doch bestimmt
die Size reducen?
Irgendwelche komischen
Compile-Flags.
GitHub-Issues.
Reduce Binary Size.
How to Minimize the Size.
Das klingt doch gut.
I'm evaluating
FMT vom Microcontroller-Code.
Exakt, das mache ich auch gerade.
Äh, what?
Nano-Lib.
Okay, Odolmit, was schreibst du da?
Chatge.
HiIQ, C++ Chatge.
Schmeiß das raus
und benutze...
Alter.
Nee.
Warum?
Wonka-S.
Nee.
Das ist ein Print-Template.
Damit kannst du weder
Zahlen ordentlich formatieren,
noch...
Nee, das funzt nicht richtig.
Das ist nicht so schön wie das andere.
Ähm...
Ach, guck mal hier.
Hier steht ein bisschen was.
FMT-Static-Thousand-Separator
soll man setzen.
Aha.
FMT-Compile.
Das Wanders.
Alles klar, was auch immer
FMT-Compile macht.
Okay, hier hat er.
Hier hat er Size-Comparison.
Okay, also.
No Defines.
Sein Flash ist 212K.
Mit das hier definiert
ist es nur noch 52K
und mit dem anderen
definiert nur 33K
und mit FMT-Compile
sogar nur 16K.
Wann machst du wieder Stellenanzeigen?
Haben wir letztens im Stream erst gemacht.
Auf YouTube.
Ach so.
Gute Frage.
Wird echt mal wieder Zeit.
Okay, was für Options kann man setzen?
Minus D, FMT-Static-Thousand-Separator.
Okay, Chat, ich brauche eure
eure C-Make-Skills.
Wie geht das?
Hatte ich da nicht irgendwie
Add-Compile-Time-Definitions?
Doch, genau so.
Haha.
Ich hab's noch in der History gehabt.
So, und dann machen wir wahrscheinlich
Minus D weg, vermutlich.
Was?
Was hat er sonst noch?
Ich kopiere mir das mal alles rüber.
Na, guck mal, wie viel...
Also, wir vergleichen das jetzt mal.
Die Firma jetzt aktuell war
430K.
So.
Jetzt gucken wir mal, wie weit...
Wie...
Kann man hier mehrere Sachen reinschreiben
oder muss man da immer
eins pro Zeile machen?
Hat irgendjemand einen Plan von C-Make?
Kann man...
Darf man sowas hier machen?
Oder geht das nicht?
Muss man das alles einzeln machen?
Probier das jetzt einfach mal.
Mehr als Compile-Fehler.
Meistens kannst du ja nicht.
Das geht?
Okay.
Ähm.
Okay, wir verwenden immer einen Punkt als...
Warum auch immer das so viel...
Warum spart man Hard-Coded-1000-Separator
so viel Speicher angeblich?
Egal.
Flash.
Flash.
Der wird das jetzt nochmal neu kompilieren,
weil ich in meinen C-Make-Configs rumgespielt hab.
Jetzt bin ich mal gespannt.
Pregel-Chat.
Lasst uns mal eine Runde pregen im Chat.
Erstens ist Ostermontag.
Ja.
Mich das ein bisschen interessieren würde.
Und zweitens hoffe ich, dass es jetzt kleiner ist,
dass ich eine ordentliche Output-Library verwenden kann.
Ich baue einen ZigBee-Temperatursensor.
Pregel.
Ich hoffe, dass es eine vernünftige,
benutzbare Größe hat am Ende.
Ich hoffe vor allem, es kompiliert erstmal.
Hat schon so ein paar komische Warnings.
Okay.
Und wie groß ist es jetzt?
135k!
Moment.
135k zu 430?
Alter!
Moment, das ist so viel...
Ich bin ein Kack-Noob.
Ich hab nichts davon einkommentiert.
Ich bin ein Kack-Noob.
Ich hab nichts davon einkommentiert.
Nein, das stimmt nicht!
Kein Wunder, dass es genau so groß ist wie vorher.
Hahaha.
Ja, okay.
Ja, ja.
Okay, machen wir mal.
machen wir doch mal sowas hier war ja aber output gleich wie das standard format kann
kann wishlist studio auch so was wie import ist es zu dumm für include fmt format nee
was muss man da fmt lib example was muss man da überhaupt importen include fmt core
standard format so und da jetzt 69 ach moment wir sind ja in mich in sie schafft wir sind
ja in also es ist fmt ok so und wie kann ich das jetzt mit diesem lockt ding hier ordentlich
ausgeben
kann ich jetzt einfach sagen output das frisst doch bestimmt keine c++ strings oder so
natürlich nicht expected ist es frisst keine c++ strings also muss ich wahrscheinlich sagen
c string oder sowas funzt auch nicht weil template magic wahrscheinlich weil format
jetzt muss ich wahrscheinlich prozent s machen ist jetzt richtig eklig aber ich hoffe dass ich
hoffe dass das muss ich wrap
ihm in irgendeiner funktion oder so noch warum halte ich mich eigentlich schon mit geloge wieder
so lange auf import oder scheint zu stimmen ich glaube ich muss das lieb ein bisschen länger
machen guck mal es ist jetzt nur 165 es ist es ist quasi nur circa 30 k größer jetzt ja das damit
kann ich leben besser als 330 kilobyte mehr
30 Kilo Byte ist okay.
So, und was schreibt der andere jetzt noch?
Irgendwas mit Compile soll man noch machen?
FMT Compile?
Ne, was?
FMT Compile?
Was ist das?
FMT Compile?
Hä?
Converts a String Literal into a Format String
that will be parsed at Compile Time.
Ah, okay.
Weniger Runtime-Geschiss.
Das macht es.
Moment.
Nein, Sachen zu Compile-Time und in den Flash-Einkommen
macht es kleiner angeblich?
Hä?
Okay.
Also, wie ging das jetzt?
FMT Compile hier drumherum.
Geht nicht, weil das nicht
bindet.
Muss ich da irgendwas
includen für?
Es wäre mega geil, wenn das so was hätte wie
Aufnahmen auflösen.
Ja, aber das gibt es ja nicht in C++ so.
Import.
Ist das da ein Beispiel?
FMT Compile.
Aha, guck mal da.
Compile
muss man includen.
Geht das jetzt?
Hey, ist funzt. Nice.
Okay, wir haben jetzt
165k.
140k nur.
Moment, wie groß war es
ursprünglich mal?
Guck mal, ursprünglich war es 135k.
Das ist 5 KB.
Ist die Library nur groß.
Jetzt.
Wie kann ich leben?
5 KB dafür ordentliches Logging
ist doch, ist doch, oder ordentliches
String Formatting ist doch, das ist es schon wert.
Das ist schon okay.
Ist aber schon krass, oder?
Von,
von, keine Ahnung, von 300 KB auf 5?
Chat.
Ich hab noch eine Idee.
Aber,
es ist doch dumm,
wenn man das jedes Mal
so hier machen muss, wenn ich was ordentlich printen will, oder?
Kann man das nicht als Template bauen?
Oder als, als, als Pre-Prozessor Makro oder irgendwie sowas?
Kann ich jetzt nicht eine eigene Log-Funktion machen?
Irgendwie so define, log oder so und dann, boah, keine Ahnung, wie das funktioniert.
Irgendwie, whatever.
Wir können uns mal dieses Makro davon angucken.
Aha, das klauen wir uns jetzt einfach.
Logge.
Das klauen wir uns einfach und machen unser eigenes Log.
Guck mal hier.
Das heißt jetzt nur Log.
Bam.
Oh.
Log-Tag-Format.
Ja, was auch, was macht denn das unter der Haube eigentlich?
ESP-Log-Write.
What the fuck?
Was macht das?
ESP-Log-Write.
Okay, lass mal gucken.
Wie geht das?
ESP-Log-Write?
Und dann?
Log-Level.
Ja, zwei.
Was auch immer.
Und dann hier irgendein Tag.
Tag-W.
Format.
Sowas dann?
Nee, Moment.
Haha.
Nee, nee, nee, nee.
Hm.
Und dann hier irgendwie das Argument.
Wie können wir das jetzt verpacken, dass das in einem Makro funktioniert?
Also.
Lass mal überlegen.
Wie kriegen wir sowas in ein Makro rein?
Also eigentlich wollen wir im Prinzip das da machen.
Wir wollen aber dieses komische Format hier noch einbauen.
Kann man da sowas hier?
Okay, machen wir das mal.
Oh Gott.
Das wird was, Leute.
Lull.
Okay.
Machen wir hier sowas hin.
Log.
So.
Tag.
Tag-W.
Format.
Lull.
Nee, Format muss das da sein.
Und dann.
Zahl.
69.
So.
Das wird aber so nicht funktionieren.
So.
Output.
FMT.
Compiling.
Warum funktioniert das jetzt nicht?
Expected Identifier.
Wollen wir vielleicht das da hinten wegmachen?
Expected Identifier.
Ich habe legit nichts, den Hauch einer Ahnung, warum das nicht funktioniert.
Machen wir das mal weg.
Vielleicht konfliktet das irgendwie.
Expected Identifier.
Expands to.
Obviously.
Alles klar.
Es ist einfach ein Genuss, immer diese Sprache zu lesen dann, ja.
Okay, Leute.
Ich habe keine Ahnung, wie man da ein ordentliches Makro draus definiert.
Ich meine, von der Idee her würde ich jetzt quasi hier dann reinschreiben.
Ja.
Format.
Ja.
Ah, ich weiß, woran das liegt.
Guck mal.
Format und Format heißt das hier.
Das nennen wir erstmal FMT.
Expected.
Das ist schon mal eine andere Fehlermeldung jetzt.
Expected das Semikolon.
Okay.
Ach, FMT habe ich auch drin.
Okay.
F.
Das heißt einfach nur F.
Press F.
Hey, das funzt.
Ha.
So.
Und jetzt loggen das Ganze.
Okay.
Und jetzt loggen.
Oh, das macht sogar automatisch Zeilenumbruch.
Ah.
Und jetzt waren wir hier.
Moment.
Oh, fuck.
Wie war das jetzt?
Prozent S, Output, C, String.
INT ist INKOMPATibel?
Was muss denn da rein?
Ach, ein ESP-Loglevel.
Ist das sowas wie ESP-Warning oder sowas?
ESP-Log warn.
Hey, angeblich funktioniert das.
Hey, wenn das jetzt funzt, lol.
Okay, testen wir mal.
1, 2, 3.
Custom Logging Function.
Hat uns keinen Schritt näher zum funktionierenden
Zigbee-Device gebracht, aber whatever.
Posture.
Äh.
Nicht wirklich.
Ach so, hardcoded.
Moment, ich habe noch keine Argumente.
Also es funktioniert, aber ich habe noch keine.
Ah ja.
Hier muss dann quasi.
Wie kriege ich denn jetzt hier die.
Wie kriege ich denn jetzt hier diese Punkt, Punkt, Punkt.
Jetzt muss ich das da reinschreiben.
V-Args.
Und ich glaube hier machen wir jetzt wieder ESP
Log W
draus und machen das weg.
Oder Log I.
Info für Default.
Geht das? Oh, nice, nice, nice.
Wir sind ja richtig
C++ Experts hier noch.
Und, und Postchamp.
Postchamp.
Es geht einfach, Leute.
Es geht einfach.
Custom Logging Makro. Easy.
Easiest Makro of my life hier.
Easy as fuck.
E-E-Easy.
Easy as, easy as, easy as fuck.
Easy.
Get rekt.
C++ Compiler.
Nice, guck mal, jetzt können wir so loggen.
Ist doch viel nicer als so hier.
Guck mal, ha.
Fuck.
So ist es nice.
Und wenn wir jetzt noch richtig, richtig, richtig echte Professionals sind.
Dann.
Ach so, was passiert eigentlich, wenn ich jetzt sage.
Log.
Keg W.
Als Tag zum Beispiel.
Und jetzt hier nur Lull ausgeben will.
Geht das dann auch?
Log mal zwei Zeilen.
Da hast du recht.
Ja.
Scheint zu gehen.
Ne.
Ah.
Conflicting Declarations.
Shit, ich lege jetzt ja die gleiche Variable mehrfach an.
Kannst du das nicht noch Hardcon?
Ne, das bleibt nicht gleich.
Weil wenn ich mehrere Optionen habe,
dann brauche ich zweimal sowas.
Ähm, wir können einfach das da nehmen.
Das hier wegschmeißen.
Und das da reinschreiben.
Dann sollte es mehrfach funktionieren.
Postchamp.
Ha.
Aber was ist denn jetzt, wenn ich, wenn ich einfach nur sage Log und dann, ähm, ja, eins, zwei, drei zum Beispiel so.
Expression must have point to.
Okay, ich muss dir sowas machen.
Ja.
Expected an Expression.
Ja, das funktioniert jetzt nicht, weil es keine Argumente gibt, aber hier das Komma davorsteht.
Das ist natürlich blöd.
Komm, irgendwie so aus wie Leading Komma oder sowas, nicht Loading, Leading Komma and Kommas.
Ja, exzellent.
Exzellent.
Template.
Äh, ich will kein Template.
Geh weg.
To the below.
To define an additional.
Additional Makro Parameter.
What?
Ne.
Zwei Makros.
Es gehen keine zwei Makros.
Man kann keine zwei Makros mit dem gleichen Namen machen.
Trailing Komma.
Ja, es ist Trailing Komma.
Ich will eigentlich Leading Komma haben.
Das, das funktioniert nicht.
Man kann nicht das gleiche, das gleiche zweimal definen.
What?
Ne, ne, ne, ne, ne, ne, ne, ne, ne, ne.
Moment.
Was, was ist der GCC?
Moment.
Was ist der GCC?
Raute, raute, raute, raute, raute, raute.
Was?
Was ist der GCC?
Moment.
Was ist der GCC?
Moment.
Was ist der GCC?
Raute, raute, raute, raute.
Raute, raute, raute, raute, raute, raute, raute, raute, raute, raute, raute, raute, raute, raute,
raute, raute, raute, raute, raute, raute, raute, raute, raute, raute, jetzt geht's.
Diese Sprache, man.
Nee, das kannst du dir nicht ausdenken.
Das ist so ein Bullshit, Alter.
Das ist so ein Schrott, Mann.
Warum existiert dieser Shit überhaupt, ey?
Es ist so schlecht.
Oh Gott.
Ist das scheiße, Alter.
Okay, das ist jetzt tatsächlich nicht mal C++ geflame.
Aber what the hell.
Okay.
aller Zeiten haben wir jetzt. Das reicht jetzt.
Jetzt machen wir mal ZigBee.
Wir können jetzt noch... Okay, eine Sache machen wir noch.
Wir definieren uns jetzt eigene Log-Dinger.
Wir sagen jetzt Log... Log...
Log-Error.
Log-Warning. Machen wir ein Underscore.
Komm, machen wir ein Underscore.
Log-Error. Log-Warning. Log-Information.
Äh... Log...
Keine Ahnung.
Anderes brauche ich nicht.
So, und das hier wird Log-E.
Log-V. Log-I.
Und Default ist Log-E.
Okay.
Wobei eigentlich... Guck mal.
Wir können das hier abkürzen.
Wir können einfach sagen, Log
ist einfach nur auf Log-I. Fertig.
Ah, das funzt nicht.
Warum?
Ah, weil das Log-I-Underscore-I ist.
Ja, das ist nice, oder?
Das ist cool.
Jetzt kann man zum Beispiel
hier sagen, Log-E.
So, da muss ich
hier reinschreiben. Keine Ahnung. Setup.
Wo wir gerade sind. Dass wir das im Log
gescheit sehen.
Äh, Format will ich nicht haben. Ich will einfach nur
ausgeben. Cute-Chat. Ah, ja, ja.
Dann wird das
Ganze geflasht.
Und dann gibt's ordentliche Ausgabe.
Hoffentlich.
Und Postchamp.
Nice.
Jetzt können wir doch anfangen, oder?
Jetzt haben wir gescheite Log-Ausgabe.
Ich mache jetzt mal was, wo ich mir nicht sicher bin,
ob das C++,
die C++-Experten so
anerkennen. Weil mir das ein bisschen viel
Geschiss ist, die Feindspunkte,
kann man sowas machen?
Dass ich einfach jetzt diesen ganzen
Schmodder hier, den ich eh überall
haben will, da reinpagge
und jetzt sage,
mein irgendein Vorteil von
Header muss die ja haben.
Ich geb die Header, Alter.
Und dann ist das
ein bisschen cleaner.
Wobei das garantiert wieder
Probleme macht, wenn ich das im zweiten Pfeil
inklude und sowas, dann spackt das wieder rum.
Weil dann irgendwie
kreisförmige Abhängigkeiten
zu Headerern und dann ist wieder alles kaputt.
Richtige Schrott-Sprache.
So.
Nice. Excellent.
Jetzt können wir ZigBee machen.
Jetzt haben wir ein funktionierendes
Programm.
Das können wir übrigens löschen.
Der Dependency
Yep-Log.
Jetzt können wir tatsächlich anfangen.
Das löschen wir mal wieder.
C-Line werde ich damit nochmal benutzen.
IS-Code. Alles klar.
Mach wenigstens einen
Include-Guard.
Dazu müsst ihr erstmal wissen, was ein Include-Guard
überhaupt ist.
Vielleicht hat es ja auch...
Oh.
Was? Wie jetzt?
Warum nicht?
Hä? Bild.
Ja, doch. Funktioniert.
Was hat das jetzt hier wieder für Schmerzen?
Warum mag das jetzt nicht?
Ich mein, es funktioniert doch offensichtlich.
Das liegt bestimmt an
irgendwelchem Visual-Studio-Code-Geschiss
hier jetzt.
Weil das irgendwas nicht richtig includet.
Schreib oben in die
Header-Datei
pragma-once.
Okay, und das sorgt dann dafür, dass ich nichts mehr doppelt
includen kann. Hä?
Moment. Und jetzt ist der Fehler auch weg?
Okay, C++.
Ich checke es nicht, aber
soll mir recht sein.
Schnuller-Luller.
Nice, Herr Name. Danke für den Sub.
So.
Lässiger Lord hat resubscribed.
Ich hab' ich gar nicht gesehen. Bist du noch da?
Danke für den Sub.
Puzzlemeister hab' ich gestern
übersehen noch.
Massive Subscribers
wieder.
Pog.
So. Also, dann wollen wir uns doch mal
beschäftigen mit Zigbee
auf dem
ESP32C6.
Ich hab' gesehen,
da gibt es Examples.
Ach ja, wie definiert man eigentlich in CMake,
gerade noch bei, seinen C++-Standard?
Also, ich glaube, wir haben den aktuellsten C++-Standard.
Das sieht man ja irgendwie hier, weil, wie sollte es auch anders sein?
Ist die Version 2021.0.0
selbstverständlich C++ 2023?
Logisch. Alles andere ist in dieser Dreckssprache ja zu obvious.
Ja.
Aber wir haben dann, glaube ich, das müssen wir nicht setzen.
Wir haben C++23.
Okay.
Also, Zigbee-Examples.
Zigbee-Examples.
Zigbee-Examples.
Zigbee-SDK-Examples.
Zigbee-Home-Assistent-Examples.
Soll mir auch recht sein.
Ein Temperature-Sensor.
Guck mal.
Es ist wie gemacht für mein Projekt hier.
Partitions. Brauchen wir nicht.
Der Tag ist noch Hard-Coded im Makro.
Der Tag ist noch Hard-Coded im Makro.
Der Tag ist noch Hard-Coded im Makro.
Der Tag ist noch Hard-Coded im Makro.
Der Tag ist noch Hard-Coded im Makro.
Der Tag ist noch Hard-Coded im Makro.
Echt?
Oh ja. Richtig.
Pass auf. Äh, Moment, Moment.
Äh, wie macht man nochmal Multi-Dings-Select in Visual Studio Code?
Ich bin gerade etwas...
So?
Hä? Okay.
War das nicht mit...
Ah.
Ah, okay. Passt.
Äh. Tag einfach nur.
Äh. Tag einfach nur.
So.
Sehr schön. Also, ZigBee-Examples.
Temperature-Sensor.
Wir machen mal diesen ganzen anderen Shit hier zu.
Temperature-Sensor C, Temperature-Sensor H.
Temperature-Sensor C, Temperature-Sensor H.
Was hat er hier definiert alles?
Was hat er hier definiert alles?
Okay, keine Ahnung. Wir müssen uns mal das Programm angucken.
Okay, keine Ahnung. Wir müssen uns mal das Programm angucken.
Main.
Okay, App-Main.
Okay, App-Main.
ESP-ZB-Plattform-Config-T.
ESP-ZB-Plattform-Config-T.
Flash-Init.
Das macht er wahrscheinlich, wenn ich
Init-Arduino schon mache, gehe ich immer ganz
stark von aus, ja.
Das brauche ich nicht noch machen.
Okay, ESP-
ESP-Plattform-Config.
Ich copy-paste mir den ganzen Kram mal.
Die Schleife hier brauchen wir nicht.
ESP-Plattform-Config.
Muss importiert werden. Ist garantiert nicht da.
Muss importiert werden. Ist garantiert nicht da.
Add-Include-ZB-Config-Plattform-H.
Add-Include-ZB-Config-Plattform-H.
Add-Include-ZB-Config-Plattform-H.
Add-Include-ZB-Config-Plattform-H.
Add-Include-ZB-Config-Plattform-H.
Add-Include-ZB-Config-Plattform-H.
Add-Include-ZB-Config-Plattform-H.
Add-Include-ZB-Config-Plattform-H.
Add-Include-ZB-Config-Plattform-H.
Add-Include-ZB-Config-Plattform-H.
Add-Include-ZB-Config-Plattform-H.
Add-Include-ZB-Config-Plattform-H.
Add-Include-ZB-Config-Plattform-H.
da mache?
Nee.
Das muss so ein komisches...
Was ist das für ein komisches Konstrukt?
Ist das irgendwie ein gerapptes
Struct im Struct oder so?
Muss ich das jetzt irgendwie so machen?
Und dann...
Hä?
Vielleicht mit einem Punkt?
Okay, Radio Mode.
Okay, Autocomplete hilft mir hier nicht.
Was?
Radio Mode Native.
Native.
Warum macht es denn da...
Was ist das für ein hässlicher Autoformat?
Ja, mach mal so.
Und da...
Chat hat irgendjemand eine Ahnung von euch,
wie man das hier schöner macht?
Das sieht doch mega hässlich aus.
Host Connection Mode.
Host Connection Mode
muss Host Connection Mode none.
Was sonst?
Logisch. Obviously.
Flash Init kommt wieder weg.
ESP Check
lässt das Ding glaube ich crashen, wenn es nicht funktioniert.
Okay.
Schauen wir mal, ob es bis dahin funktioniert.
Das ist ein Struct, ja.
Kann man das denn irgendwie schöner machen,
so das zu initialisieren ineinander?
Ich meine, so schlecht sieht es eigentlich nicht aus.
So schlimm sieht es gar nicht aus.
Oh, es hat nicht funktioniert.
Was?
Undefined Reference to ESP
Platform Config.
What?
Wie jetzt? Da ist es doch.
Nichts undefined.
Da ist es doch.
Hä?
Fehlt eine Library?
Das ist eigentlich Default, oder?
Ach, wisst ihr, was sein kann?
Dass ich ZigBee erst noch aktivieren muss.
ZigBee?
Hier, Enable ZigBee ist aus.
Wo ist das hier offiziell?
Drunter unter
Component Config ZigBee vielleicht?
Seht ihr sowas?
Component Config ZigBee?
Nee, oder?
Wo könnte das jetzt drunter sein?
Teileoptions bestimmt nicht.
Bluetooth?
Ich habe es nicht gesehen.
Ach, da ist es doch.
Das war so offensichtlich, weil ich den Mauszeiger drauf,
beziehungsweise das Ding drauf hatte.
Ich habe es wirklich nicht gesehen.
Hahaha.
Der Chat denkt, ich verarsche.
Erster April.
Can't wait.
Okay, Configure ZigBee Device.
Was haben wir zur Auswahl?
ZigBee Green Power Enable.
ZigBee Green Power Enable.
Was ist ZigBee Green Power?
Es ist jetzt nicht so, als braucht es normalerweise.
Green Power ist gut.
Das klingt nach weniger Strom.
Ich will das Ding immer in der Batterie betreiben.
Also alles gut.
ZigBee Device Type.
Koordinator, Router Device,
End Device oder
Green Power Device.
Was ist ein ZigBee Green Power?
Green Power
is a feature of ZigBee that allows
for energy harvesting technology.
Oh, so.
Nee, das brauchen wir nicht.
Das ist unsinnig.
Wir sind höchstwahrscheinlich ein End Device,
würde ich mal vermuten.
Ich habe keine Ahnung von ZigBee.
Jetzt kann man Green Power Organe mal einschalten.
Okay, save.
Und jetzt noch mal bilden.
Ich hoffe, dass das jetzt funktioniert.
Dass wir jetzt ZigBee...
Ich weiß nicht, ob ich das so genau verstehe.
Ich habe doch hier letztens ESP-IDF.
Die haben doch so einen ZigBee Rapper,
um ZigBee Sachen zu erstellen.
Vielleicht sollte man lieber den verwenden.
Hier, ESP-ZigBee-Lib
vor 8 Stunden geupdatet.
This component contains
a binary library supporting
the ESP-ZigBee-Lib.
It provides
most of the ARPs that users could use
in ZigBee product.
Project Development.
Ja, aber das checke ich jetzt nicht.
Moment, binary shit?
Moment, ich glaube,
das habe ich schon, oder?
Habe ich das nicht alles schon?
Ey, keine Ahnung.
Keine Ahnung, was die da alles definen.
Ich hoffe mal,
das habe ich einfach alles schon.
Und muss nicht noch mal
extra installieren.
Okay, example.
Also, er crasht uns zumindest nicht.
Äh, was?
Undefined reference?
Immer noch?
Obwohl ich ZigBee
enabled habe?
Moment, ist das vielleicht auch in dieser...
Ist das auch da drin?
Und ich muss das...
Ich muss wirklich diese...
Ja, da steht ja aber nirgends wo.
Ich muss echt diese...
Vielleicht wirklich noch diese Library hier installieren.
Aber woher weiß ich das?
Einfach, einfach ausprobieren?
Ich installiere die jetzt einfach
und gucke, ob es dann funktioniert.
ZigBee
Build
Da steht es jetzt ja.
Okay, erstmal wieder das halbe Internet-Computer.
Logisch, logisch.
Aber...
Ja, ja, guck mal.
Der kompiliert jetzt schon irgendwelches
neues Zeug.
Undefined reference?
Ich habe keine Ahnung.
Wo kommt das her?
Was muss ich
includen? Was muss ich machen?
Nochmal, Menu-Config?
Habe ich das irgendwie nicht richtig gespeichert?
ZigBee
ZigBee is enabled.
Kein Green-Power-Device.
Kein Green-Power-Device.
Warum geht denn das nicht?
Okay, was includen denn die Jungs
hier noch in ihrem...
Also Chat, wenn ihr irgendeine Idee habt,
nur her damit.
Includen die hier noch ESP-ZigBee-Core?
Das habe ich noch nicht.
Das habe ich noch nicht included.
Nein, nicht Menu-Config. Nochmal Build.
Das jetzt nochmal?
Oder ansonsten? Was haben die sonst noch?
Das können wir auch nochmal includen.
Warum nicht?
Temperature-Sensor
können wir auch alles includen.
Das nicht, das nicht.
Das auch nicht.
Auch nicht das hier.
Achso, das ist der
Header-File davon.
Ey, Moment, jetzt ging's?
Jetzt hat es gebildet gerade?
Was war es denn jetzt?
Das sind die
offiziellen Espressif-Beispiele.
Jetzt ging's.
Flash. Okay, irgendwas da.
Was davon war es wohl?
Okay, er crasht nicht. Er crasht nicht.
Das macht mich, das stimmt
mich schon mal zuversichtlich.
Okay, wie geht das jetzt weiter hier?
Mal den ganzen Krempel zumachen.
Wie geht
das jetzt weiter? Also,
jetzt wird...
Das haben wir gemacht.
Jetzt erstellt er einen neuen Thread.
Das bin ich mir nicht sicher, ob
das notwendig
ist, weil
doch wahrscheinlich ist das notwendig.
Dass der
nicht hängt hier irgendwie
in Main.
Es hat zwar nur eine CPU,
aber das hat RTOS drunter. Das kann doch so
ein bisschen minimales Threadmanagement...
Okay, wahrscheinlich brauch ich das nicht,
aber wenn ich noch
Bluetooth oder Wifi zusätzlich verwenden will,
dann
muss das ziemlich sicher in einem
eigenen Thread gestartet werden. Wir lassen das mal
weg. Mal gucken mal, wie weit wir kommen.
Initialize the Zigbee-Stack.
Let's go. Der Zigbee-Stack.
Get initialized.
Wir machen mal hier kurz Delay rein.
Von der Sekunde.
Weil ansonsten
reicht es, wenn wir ganz normal loggen.
Loop.
Main.
So, ESP-ZB
Dings-Config. Okay, das kommt
auch aus dem Header.
Ja. What?
Was
haben die alle für ihren Hang dazu,
jeden Furz zu definen?
Irgendwo oben drüber, anstatt
das da ordentlich unten hinzuschreiben.
Scheiß drauf, wir machen das wieder selbst.
So.
ESP-
ZB-Roll
ist
ESP-ZB
Device
Type
ED.
Obviously, Leute, oder?
Ihr hättet auch gewusst, dass es Underscore ED ist.
Wenn das nicht
klar ist, dann verstehe ich das auch nicht.
Gleich, was? Install.
Ah, das gibt's wieder nicht.
Install Code Policy.
Aha.
Hier ist es gut erklärt.
Ja, ja.
Ja, klar.
False.
Okay. False.
ED-Timeout.
ED-Aging-Timeout.
ED-Aging-Timeout.
ED-Age-Timeout.
Okay, das heißt anscheinend wirklich so.
Ah, Moment. Nee, nee, nee.
Hier. False. Nicht da oben. False.
Hier. False.
Dann.
NWK
CFG.
Ah, das ist
PainsChamp hier.
So.
ZCCRCFG
oder CED
CFG. CED
CFG brauchen wir. Aha, ja.
Alles klar, natürlich.
Und da brauchen wir jetzt
ED-Timeout.
ED-Aging-Timeout.
140...
Moment, was?
Jetzt.
Ach, hier wird es gesetzt.
Was heißt der Dot-Prefix?
Das ist für Struct-Felder.
Warum auch immer da mal ein Punkt am Anfang sein muss.
In C-Sharp kannst du es auch
so machen, aber komplett ohne Punkt.
Der Auto completet dann einfach die Struct-Felder.
Automatisch.
Oder die
Klassen-Properties.
Keep-Alive.
ED-Keep-Alive.
3000.
Natürlich.
Okay.
Ich bin
gespannt, ob es immer noch
kompiliert und ob es immer noch nicht
Ah.
CB-App-Signal-Händler.
Wie jetzt?
Das habe ich doch nirgendwo verwendet.
Wo kommt denn das her?
Ah, das muss definiert sein, dass es überhaupt läuft.
Aber woher
weiß der das?
Ach ne, Moment, das kommt doch bestimmt hier oben.
Ah ja, sehr schön lesbar
wieder alles.
ESP-ZB-App-Signal-Händler.
ESP-ZB-App-Signal-Händler.
ESP-ZB-App-Signal-Händler.
Woher weiß der überhaupt,
dass es sowas geben muss?
Ach vielleicht, das ist ein Callback.
Wahrscheinlich muss das einfach
angelegt sein, sonst
kompiliert er nicht, weil irgendwas von diesem
Krempel hier
sucht, ob das da ist.
Und wenn es nicht da ist,
dann geht es einfach nicht.
Gucken wir mal, ob es jetzt funzt.
Ah, sieht besser aus.
Oh, Alter, kaum ist
ZigBee drinne. Guckt mal, wie fett
die Firma... Oh, es crasht.
ZG.
Warum crasht es jetzt?
ZB-Partition.
Moment, wir müssen
noch den Flash-Speicher
anders partitionieren, damit
das funktioniert?
What? Wie jetzt?
Vor allem...
Wie geht das?
Ist das vielleicht hier im Beispiel
drinne? Partitions!
Ne CSV, was sonst?
Na gut,
ich mein, es könnte schlimmer sein. Es könnte XML
sein, okay? Warum braucht
ZigBee ne eigene Partition auf dem
Flash-Speicher? Und warum braucht das Ding
überhaupt Partitionen?
Wisst ihr was? Ich nehm das hier jetzt
einfach mal und kopier
das bei mir ins Projekt rein.
Ich hab überhaupt keine Ahnung davon,
ob das hier direkt
ins Projekt rein... New File
Partitions.
CSV
Auth-Info für Netz...
Ja, aber das könnte man doch auch so speichern. Da braucht man doch
keine eigene Partition für.
Rainbow CSV.
Ist
das gut?
Ja, ist approved.
Excellent!
Oh, viel schöner gleich.
Und die Frage ist jetzt, macht er das
automatisch mit diesen Partitions?
Wenn ich das jetzt neu
flashe? Boah, ist die
Firmware fett, man!
Anderer Fehler?
Anderer Fehler, oder?
Ne, partition.
Ähm...
Okay.
Partition.
CSV ESP32. Wie von
Partition Tables?
Da muss man bestimmt irgendwie
EDF Pi Partitions oder sowas
machen.
Part... Flash
Partition Table?
Ne, das funktioniert so net.
Äh... Ich hab keine Ahnung.
Moment, der sagt
uns doch seine Partition Table.
Macht er das?
Ich sehe hier keine Partition Table drinne.
Doch, hier Partition Table.
Der hat die nicht geflasht, diese Partition Table.
Okay, also irgendwie
müssen wir den dazu bringen, dass der aus
dieser...
Partitions CSV...
Okay. Aha.
Generating binary partition table.
The partition table which is flashed
is in a...
tool is used to...
If you configure the partition table
CSV name in the project configuration...
Aha!
Menu Config müssen wir
machen. Da soll mal
einer durchblicken, ey.
Grausam. So, wie geht das
jetzt hier?
Moin. Partition...
Partition...
Table?
Aha. Partition Table
Custom. Das muss aber doch hier irgendwie ordentlich
stehen. Bootloader Config vielleicht.
Feierabend spielt sie ans Trinken.
Sehr gut. Exzellente Fifehead Idee.
Und ich muss mein Osterhas
noch weiter verspeisen.
White people happy,
people fat.
Äh...
Seht ihr irgendwas von Partition Table?
Gibt doch einen extra Punkt Partition...
Ach hier! Guck mal da!
Partition Table. Single Factory App. No OTA.
Custom Partition Table CSV.
Partition Table...
CSV, ja.
Der nimmt... Der will schon, dass es
Partitions CSV heißt.
Okay.
Flash.
Genau. Jetzt bin ich mal gespannt, ob
das hinhaut.
Postchamp und Brage Chat.
Wir haben nur noch...
Wir haben bloß noch 20 Minuten Zeit.
Danach explodiert das Gerät, wenn's
bis dahin nicht geht.
Das ging jetzt aber... Aha! Aha!
Ich hab schon gesehen, da steht mehr drinnen
bei Partition... Nee.
Okay. Flash...
Partition Table. Hä?
Da ist überhaupt
nix Neues drauf.
Was... Was für ein Problem
ist das hier?
Partition Table.
Partitions...
Partitions...
Partitions...
Heißt doch so, oder?
Partitions Punkt
CSV. Du hattest nur
Partition Flash ausgeführt, ja?
Das... Reicht das nicht?
Muss ich...
Muss ich einen kompletten Bild Flash
irgendwie machen? Wahrscheinlich.
...
Ja, ich muss kompletten Flash machen.
Weil...
ich ja Menu-Config ausgeführt hab.
So, Menu-Config
hab ich gemacht.
Womks...
Ist schon echt ein wenig
umständlich alles. Aber es geht!
Ich mein, es ist nicht so, dass man sagt, ey, ist komplett
wir. Außer halt die C++-Geschlechte.
Die ist komplett wir.
So, okay.
Brage Chat. Hoffentlich tut's jetzt.
Okay.
PostChamp.
Äh, es ist nicht gecrashed.
Es ist in der Main-Schleife drin.
Es hat funktioniert!
Ich glaub, wir haben ein richtig
Partition-des-Device am Start.
Okay, komm, weitermachen.
EasyClap.
So, wie geht's denn weiter?
Also...
Das haben wir gemacht.
ZigbeeStackInit.
Create Custom
Temperature Sensor Endpoint.
...
Alright. Machen wir.
Sensor
Maximum Temperatur.
Maximum Temperatur
ist...
90 und...
Nein, ne, Moment.
Maximum Temperatur 90 und
Mindest-Temperatur... Ja, was ist denn...
Was darf denn da jetzt rein? Ist das...
Äh...
Wo kommt es her?
What?
Kann ich da... Kann ich da nicht einfach so
sagen 1?
90?
Das ist immer...
Mal 100?
Also muss ich quasi
sagen 100 und 9000?
Okay.
Soll mir recht sein.
Dann diese wirre
Geschichte hier.
ESP Custom Sensor EP
Create. Okay, das
copy-paste ich mir mal, weil ich keinen Plan hab,
was da eigentlich grade abgeht.
Custom Temperature Cluster
Create. Meine Güte, ey!
Wie viel Zeug ist denn noch?
Okay, da weiß ich nicht, wo das herkommt.
Hä? Ich hab doch grad danach gesucht.
Nee.
Bin ich jetzt in einer anderen Datei, oder was?
Bin ja klar... Hä?
Die Suche ist...
Die Suche ist einfach Schrott.
Jetzt finde das. Okay.
Was auch immer
hier grade passiert.
Natürlich geht mal wieder
irgendwas, nicht? ESP...
Manufacturer Name is undefined.
Manufacturer... Cute Chat.
Model Identifier
Omega Lull.
Was muss denn das sein?
Ah, das muss ein Pointer
von irgendwas Bestehendes sein.
Okay, also muss das... also wahrscheinlich
muss das...
Wo kommt denn das hier her?
Das kommt bestimmt aus dem Header.
Manufacturer Name.
Alles klar. Okay.
Ich mein, wir können's immer noch
ändern, ja? Wir lassen's jetzt
einfach...
Okay.
Visual Studio Code. Warum willst du das
bitteschön umbrechen?
Ist das sonst zu lang? Aus irgendwelchen Gründen.
Argument of type
const char is incompatible.
Das hab ich doch überhaupt nicht mehr.
Flash. Is not declared.
Wo kommt
das jetzt wieder her? What?
Das muss doch aus dem Header
kommen. Ah, da ist ein Komma dahinter.
Zehn. Äh, alles
klar. Boah, ist das
unübersichtlich, Mann.
Endpoint.
Ach, hier unten. Zehn.
Ich hoffe, das bildet jetzt, weil
ich seh den Fehler nicht.
Nee. Es ist...
Invalid conversion
from const void
to void. Es...
Okay, C-Zeug.
Was, was ist... wie jetzt was?
Was will der hier haben?
Er will ein void Pointer
auf irgendwas. Vor allem...
Was will der denn hier mit 0x
irgendwas haben von mir?
Warum muss es 0... 0...
Okay.
Also das muss ich casten jetzt
wahrscheinlich. So.
Er möchte, dass es ein void Pointer ist.
Dann
soll das jetzt eben auch ein void Pointer sein.
Aha. Aha.
Na, easy. Das ist ein
vertical tap.
Keine Ahnung, was wir da treiben.
So, also wir haben jetzt
hier einen Endpoint
für einen Temperature Sensor.
Und was... was
macht der jetzt?
Ne, Moment. Das... das...
So weit sind wir ja noch gar nicht.
Device register.
Das können wir jetzt machen.
Das sollte bis dahin jetzt durchlaufen.
Ich hab so keinen Plan, was hier eigentlich
funktioniert... was hier passiert.
Register. Okay.
Aber ich muss das doch noch irgendwie pairen
mit meinem Home Assistant.
Config the reporting info.
Na erst
erstmal wird copy pasted.
Und geguckt, ob es funktioniert.
Und danach wird versucht
Cast to Customize uns zu verstehen.
Und ich copy paste ja auch nicht alles.
Sondern eine Reihe nach, um halbwegs
zu checken, was da abgeht.
Okay, bis zum Start.
Register.
ESP.
Hatten wir das nicht gerade? War das nicht 10?
10.
War das?
Jetzt kackt
die Autocompletion ab.
Out of order initializers.
Ist mir doch egal. Bam. Hauptsache es funktioniert.
Oh ne. Ne.
Das mag der nicht.
Das ist vielleicht in C okay, aber
nicht in C++.
Also wir brauchen U.
U.
Sendinfo.
Und dann
muss der Shit da rein.
Wobei das mit dem U mag der gar nicht.
Mag er das so?
Ne.
Das darf man so nicht machen, okay.
Oh Mann, Alter.
Ist das komplizierter Shit.
Ja, also
wir brauchen jetzt noch dest gleich
Profile ID.
Laster.
Das sollte er jetzt
fressen hoffentlich.
So, und dann brauchen wir U
gleich
Send.
Sendinfo. Äh, nicht so.
Send.
Sendinfo.
Und da
jetzt. Okay, das kommt weg.
Und da brauchen
wir jetzt
Minintervall gleich 1.
Max
Intervall gleich. Ich hab
keine Ahnung was der da eigentlich macht.
Def Minintervall 1.
Def Max
Def Max Intervall
gleich
0.
Delta.
Oh ne, muss ich das jetzt auch noch so machen?
Was, was? Moment, was?
Das war's. Delta 16.
Mehr muss ich nicht setzen.
Äh.
Was hab ich falsch gemacht?
Wo ist, wo stimmt wieder irgendwas nicht?
Ah, Def Min muss das sein.
Da gibt's noch Delta.
Ey, das ist ja richtig ab...
U 16 gleich 100.
Was auch
sonst. Ja, ich, ist vollkommen
klar, dass U 16 gleich 100
sein muss. Hoffentlich geht
das jetzt. Äh, was?
ESP
ZB Primary Channel Mask.
Primary
Channel Mask.
Ist was?
Mask?
Okay, genau das ist es.
Logisch.
Aha.
Was hat der jetzt noch für Schmerzen?
Order for Field
U does not match declaration
order in...
Ja, und?
Who cares?
Woher weiß ich denn die declaration
order?
Ist das hier jetzt davor, oder wie?
Alter, wer soll denn, wer soll denn das
bedienen, man? Das kann doch so nicht,
das kann doch nicht, in Ernst, dass man das so benutzen soll,
ne?
Adil ID does not match declaration
order. Ja, und?
Woher weiß ich denn die declaration
order?
What the hell?
Was? Das muss doch irgendwie
anders gehen.
Diese Structs zu füllen
an der richtigen
Posi. Das kann doch so nicht sein, dass das so
so abartig ist. Kann man nicht einfach
sowas hier machen? Jetzt mal ganz doof.
Und jetzt sagen hier
Reporting, jetzt mal diesen
Shit hier mal weglassen.
Und jetzt sagen Reporting Info
Punkt
Direction gleich
Reporting Info
Punkt EP gleich
10. Ja, das ist doch viel besser.
Kann man
auch lesen.
Cluster ID, das
äh, Reporting Info
Cluster
Cluster Role
Ey, ich hab wirklich keine Ahnung, was das
eigentlich alles macht.
Reporting Info, und jetzt kommt was?
EP? Ne, DST?
Gut, da können wir jetzt sowas hier machen.
Das ist ja in Ordnung.
Ups.
Wonka ist.
Reporting Info
Adre ID
Pass auf,
das frisst er jetzt gleich.
Easy, das juckt ihn jetzt nicht.
Reporting
U. Warum
nennt man
Zeile 84 Semikolon?
Ah ja.
Warum nennt man was einfach nur U?
Ich glaube, die
haben zuviel mal in Stream geguckt, oder?
Ich nenn die Sachen auch immer so.
Und ich sag, es muss halt einfach
funktionieren, dann ist es egal.
Dann wärs ne 1.
Das stimmt. Ich bin ja beim Einser-Copypasten.
Out of Order.
Ja, meine Güte, ey.
Was zum?
Ich weiß ja gar nicht, wenn ich ja wüsste, was
die richtige Order ist.
Report
Reported Value.
Keine Ahnung, 10?
In einer falschen Reihenfolge, okay.
Was hab ich denn noch vergessen?
Nix.
Ey, ich hab ernsthaft keine Ahnung,
woher man überhaupt wissen soll,
wie man's richtig macht.
Was ist denn das für ein komischer Typ hier überhaupt?
Send Info.
Ey, das funzt nicht.
Das geht nicht.
Weil das C++ ist und das mag der nicht.
Oder doch?
Der mag nur das nicht.
Oder mag,
oder ist ihm das vielleicht sogar...
Moment, was?
Wo kommt denn jetzt dieses Komma
da unten her?
Das hat da nix zu suchen.
What the hell?
Versuch mal Delta zwischen
dem Max-Intervall und
Def-Min-Intervall.
Okay, funzt.
Wo auch immerher man das wissen soll.
Ja, aber dieses Autocompletion zeigt sich halt mal richtig an.
Zeile 88 muss Semikolon, ist doch...
Achso.
Hä?
Was passiert denn an der Stelle jetzt ein Komma,
ohne dass das meckert?
Man weiß es nicht.
Sogar die Sprache und der Compiler selbst
ist da drüber verwirrt.
Ich bring hier keinem wirklich Programmieren bei gerade, oder?
Mein Output hängt.
Wisst ihr, woran das liegen könnte?
Oder ist der Controller
gerade abgekackt?
Sekunde.
Probieren wir mal. Ups.
Ich hab meine Verlängerung runtergeschmissen fürs Headset.
Sekunde.
So.
Okay.
Der startet jetzt.
Achso.
Ja, weil er in der Loop hier unten hängt.
Ja, kein Wunder. Das hat jetzt alles funktioniert.
Nice.
Okay, hierhin kommt er gar nicht mehr.
Der bleibt hier quasi hängen.
Weil er jetzt hier irgendwie mit weitermacht.
Okay.
Okay, das heißt jetzt
kriegen wir jetzt Zigbee-Events?
Irgendwie?
Wir brauchen noch kurz...
Jetzt ist das einzige, was noch offen ist,
dieser Signal-Händler.
Heißt im Endeffekt, wir sollten jetzt
Zigbee-Events kriegen, oder?
Probieren wir doch mal aus,
ob wir Zigbee-Events kriegen.
Vielleicht muss ich das wirklich in einem eigenen
Task starten, dass das jetzt funktioniert.
Ja, ich muss das in einem eigenen
Task starten. Deswegen starten die
das ja auch in einem eigenen Task.
Das Main weiterläuft danach.
Aber ich mach hier im Main nix. Egal, schauen wir mal.
Lock.
Zigbee...
Ja, wir loggen hier einfach
irgendwas und schauen, ob das...
Boah, ist die Firmware fett
mittlerweile, Mann!
Hey! Guck mal, wir kriegen Zigbee-Events!
Wir kriegen Events!
Sonst würde jetzt hier
nix kommen. Das Ding ist jetzt,
wie registriere ich das denn?
Boah, was...
Das will ich... Das ist mir jetzt zu...
Das ist mir jetzt zu pfeifert hier.
Ich mein, ich copy-paste
es mir einfach mal. Das sollte ja eins zu eins
funktionieren.
Ne. Tag ist undefined.
Okay.
Define.
Define.
Tag. Tackle. Nicht
taff. Tag.
Deferred driver init.
Ja, ne. Das wollen
wir jetzt nicht. Ich will ja nicht wirklich...
Ich will ja nicht wirklich ein...
Was auslesen.
Das kommt weg.
Monka Steer!
Ja, Leute.
BD Star Top Level
Commission ZB.
What the fuck, Alter?
ESP Return on Falls.
Okay, wo kommt das her?
Wo kommt ESP
Return on Falls her? Kann man das importieren?
ESP Check. Okay.
Okay.
Flash. Gucken, was jetzt passiert.
Fuck. What?
Invalid
Conversion. Was für ein Ding?
P...
Aha. Warum?
Was ist invalid da dran?
To ESP
App
Signal Type.
Äh. Auto.
Easy fix.
Äh. Wo seht ihr hier irgendwie
den Fehler? Was hat er hier? Was will er hier?
Argument of
Type UN32
is not compatible.
Warum nicht?
Weil es ein ESP ZB
App Signal Type sei. Muss ich das
vielleicht casten oder so?
Ich glaub, das hier muss Auto
sein, dass das funktioniert.
Bin ich, bin ich grad verwirrt. Äh.
Ja, auf jeden Fall
irgendeinen komischen Bug drinne bei sich.
SIG Type?
Das ist ein Int Pointer?
Ich will erstmal, dass das kompiliert.
Ne, ich glaub, der Typ, der vorne steht, stimmt
einfach gar nicht.
Network Steering was not successful.
Oh nein, Leute.
Monka Steer failed.
Ich hab keine Ahnung, was das bedeuten soll.
Aber
wir gucken mal,
was passiert, wenn ich
mein Home Assistant einschalte
und jetzt
sage, edit
zum Netzwerk. Mal gucken,
was jetzt passiert.
Das scheint ja in irgendeiner Endlosschleife
zu laufen, ja? Dass er das immer wieder
probiert. Vielleicht sollten wir nochmal
schnell probieren, das hier zum Laufen zu bekommen.
Was hat er denn für ein Problem
überhaupt?
32 is not compatible
of type ESP app signal type.
Hier hinten das, oder wie?
Signal to String.
Das hier.
Kann man das einfach casten?
Dann ist gut.
Heute kein Bettge? Doch.
Gleich
Bettge. Oh shit,
was denn?
As long unsigned int
%x
Oh fucking shit.
Mann.
Das hier ist doch wirklich nur Logging.
Also, draufgeschissen.
Log. W.
Lob.
Lob. So. Null.
Hauptsache, dass da irgendwas loggt.
Aus irgendwelchen Gründen geht mein eigenes
Logging nicht mehr.
Okay. Also das Flashen
dauert schon deutlich länger jetzt, weil die Firma so
fett ist.
Network steering not successful.
Integrations Zigbee.
Äh.
Add devices via
this device.
Ah. Joint. Da ist er.
Easy.
Easy.
Easy.
Easy as fuck.
Easy as fuck.
Easy as fuck.
Easy as fuck.
Easy as fuck.
So, mal gucken, was der jetzt für Temperatur exportiert.
Minus 327 Grad.
Ja gut, ich hab ja auch irgendeinen Bullshit
gesetzt, ja.
Da ist er. Guck mal.
Mein eigenes Zigbee
Gerät.
Temperature
minus 327 Grad.
Ich weiß
gar nicht, wo ich das überhaupt setz.
Hier, Report. Irgendwo im Report
setz ich das doch.
Delta. Wo setz ich, wo, wo
setz ich denn die Temperatur überhaupt?
Wo setzt, wo setzt, wo
setzen die hier denn die Temperatur?
Hier.
Hier setzen sie die Temperatur.
Jetzt weiß ich auch, warum die mehrere Threads
machen.
Wo wird denn das aufgerufen?
Oh, nicht.
Das wird immer.
Ach, beim Reboot wird das einmal gesetzt,
oder wie? Einmal
beim Reboot. Alter,
der neue Github Editor ist so ein
Schrott, Mann.
Eben hab ich's doch noch gefunden, was ist denn hier?
Twitch streamt gerade was mega
krasses.
Richtig geil, dass die Steine streamen, seh ich gerade.
Okay, Static.
Update. Wir machen jetzt einfach hier
mal das so.
Endpoint 10. Temperature.
Temperature. Einfach 2000.
Okay, bam.
Wobei, ich hab doch eigentlich
gesagt, Min Temperature
100. Okay, 2000.
Measure Temperature.
Update Temperature Sensor.
So, jetzt ist das Ding.
Das Ding, das wird nur einmal
auf, nee, Temp Sensor
Driver in it.
Alter, ist das scheiße, dieser neue
Editor, Mann.
Temp Sensor
Driver. Okay, wo kommt denn das
her? Wo kommt
Temp Sensor Driver Punkt H her?
Das kommt garantiert
aus irgend so einem
Common? Ja.
Hier, Temp Sensor Driver.
Ich meine, die machen ja auch,
die machen ja auch einen
extra
X-Task Create.
Das machen wir jetzt auch.
Das ist das letzte, was wir heute machen.
Deswegen, das dachte ich
mir, dass wir das tatsächlich
so leicht Multithreaded machen müssen.
Ja.
X-Task Create.
Aber jetzt hier, so, das nennen
wir jetzt Temperature.
Oder hier, wie heißt das Ding?
Dieser Task, den ich für die
Temp.
Machen wir das mal unten drüber.
Ja, ESP.
Ja, und die braucht keine Flow
Temperature, sondern
das wird einfach jetzt hier reingehauen.
Äh, was muss das haben?
Okay,
Pointer, Parameter, das brauchen wir nicht,
aber, hauen wir mal rein.
So, und jetzt können wir hier
drinnen nämlich sagen, While
True
Delay,
müssen wir dann aber auf jeden Fall reinmachen.
Delay von einer Sekunde, weil ansonsten
kackt das ab.
Release. So, und jetzt machen wir
jetzt einfach noch Log, W, irgendwie
äh, ja,
Sensor,
Refresh.
Mal gucken, ob das jetzt, mal gucken, ob das
jetzt läuft.
Speichert sich der ESP auch den Key?
Vermutlich, ja, deswegen musste man das
mit dem Flash machen.
Okay, der Refresh fun-
Wo immer das jetzt rebooted hat.
Refresh, Refresh, Refresh.
Äh.
Der überträgt aber nix an neuen
an neuen
Sigbee-Werten, ne?
Und woher weiß der das jetzt?
Dass der das überhaupt dahin
übertragen muss?
Sollen wir da was anderes mal reinschreiben?
Guck mal 2 rein.
Oder 1, ob da irgendwas jetzt was anderes
steht, klar.
Also ich hätte jetzt eigentlich gedacht, damit
updatet er das
jetzt.
Set Attribute.
Ja, da ist hier oben bestimmt irgendwas
ein bisschen in die Hose gegangen.
Das werden wir
heute Abend nicht fertig debuggen können.
Ah, da muss man hier bestimmt
irgendwas muss man da einstellen.
Reporting Info, da ist bestimmt
irgendwas, Shep.
Das hab ich gar nicht gesetzt.
Manufacturer Code und sowas, oder?
Reporting Info.
Ich hab irgendwie aufgehört bei
Attribute ID.
Delta hab ich noch gemacht.
Profil auch.
E-Roll.
DST Profil.
Manufacturer Code
hab ich grad gesetzt, wobei es das jetzt
eigentlich nicht sein sollte, oder?
Und was meint mein Home? Null!
Der überträgt, doch, doch, doch,
der überträgt was, guckt mal.
Ich übertrag nur Mist.
Der überträgt schon,
ich weiß bloß nicht in welchem.
In 16t.
So macht der da.
Temp mal 100.
Ja, das hab ich ja gemacht.
Also, das
macht prinzipiell schon was.
Aber ich weiß nicht genau was.
Ja.
Weil jetzt ist er der Meinung,
dass es 0 ist.
Und wenn ich jetzt da
nochmal irgendwas anderes reinschreibe,
hier irgendwie,
measured value
10.
Der macht auf jeden Fall irgendwas.
Max auf 90?
Hab ich doch gar nicht.
Ich hab, ich hab auf 9000
gesetzt. Ah!
90.
Ach so.
Das ist 90?
Aber 2000, aber da unten macht er
das gleiche mit dem Wert.
Eigentlich müsste es 2000
müsste 20 ergeben dann.
Okay, whatever. Jetzt hat er 0,1.
Okay, okay.
10 ist 0,1.
Ja, weil die immer mal 100 machen.
Im Endeffekt.
Also das, das funzt schon.
So richtig verstanden
hab ich's noch nicht.
Ja, und es braucht immer ein bisschen,
bis das updatet.
Also im Prinzip geht's.
Das müssen wir uns aber das nächste Mal
auf jeden Fall genauer angucken.
Was da, was da jetzt eigentlich passiert.
Aber er sendet über Sigbee
Dinger.
Das ist übrigens nicht das value hier.
Das ist
die ID, dass es ein Temperatursensor
ist. Das hier ist der value.
Jetzt hat er's gecheckt. Jetzt ist 10. Guck!
Dann hab ich aber nicht gecheckt,
warum's die 2000 vorher
nicht gefressen hat.
Wie auch immer, ist mir wurscht. Es funktioniert.
Ich kann sogar Werte übertragen.
Das ging besser,
als ich mir das vorgestellt hab, oder Chad?
Was findet ihr? Ich hab gedacht, ich mein, es ist
ziemlich viel Copy-Paste gewesen.
Ich versteh die Hälfte davon nicht.
Aber im Großen und Ganzen besser als
gedacht, ne?
Das ist gar nicht so super kompliziert.
Wenn man sich das jetzt nochmal genauer anguckt,
kann man wahrscheinlich die Hälfte von
rausschmeißen, wenn man sich damit beschäftigt.
Aber schon nice. So, und jetzt geht
er bestimmt auch gleich auf 20.
Der braucht ja immer so ein paar.
Guck, 20. Ja.
Das ist nicht übel.
Ich wüsste jetzt...
Actual Reportable Change?
Ich wüsste halt echt gern, was diese ganzen...
Actual Maximum
Reporting Intervall
Minimum
Default Minimum Reporting...
Okay, damit muss man sich ein bisschen
im Detail beschäftigen.
Custom Zigbee-Stells. Cool.
Okay, Leute.
Dann wird's jetzt Zeit
für was?
Badge. Abziehen.
Abziehen.
Welches Board benutzt du?
Moment, das kann ich dir noch sagen.
Ich bin...
Home Assistant wird auch ausgeschaltet.
Ich benutze ein Board,
was für meine Anwendungszwecke gut geeignet ist.
Nämlich ein ESP32C6
Beetle 2
oder so. Das Teil
benutze ich.
Das ist mega nice, weil
das hat direkt einen Connector für
Akkus.
Inklusive Ladeelektronik für Akkus.
Theoretisch sogar Anschlüsse für
Solarpanels, die du mit der Ladeelektronik
dann dein Akku speisen könntest.
Und
es braucht im Deep Sleep
bis 16 Micro Ampere.
Und das Ding wird einfach
den halben Tag Deep Sleepen.
Das wacht alle, keine Ahnung, 4 Stunden mal auf.
Misst die Zeit.
Man könnte es ja noch mehr übertreiben.
Mit dem Ultra Low Power Prozessor
das auslesen.
Und nur schicken, wenn
Temperaturdifferenz größer als
2 Grad, was auch immer.
Aber wir wollen es mal nicht übertreiben.
Und da hält das Ding 2-3 Jahre
an der normalen Batterie.
Kommt in den Garten dann.
POG, sehr nice, Leute.
Hat mir gefallen. Wir hören uns morgen
oder die Tage. Bis dann. Macht's gut.
CU.
