so da bin ich omega pock ich bin ja ich will nach dem im ort nicht suchen weil
im zweifelsfall gibt es das auch natürlich gibt es omega pock was was
was denke ich mir selbstverständlich gibt es omega pock so ziemlich alle
emotes die ich mir so kurz oder fly ausdenken kann ist schon jemand drauf
gekommen omega pock ggg aktiviert auch ein sehr
beliebtes im ort wir haben glaube ich ich wurde und
scheiße wir haben so unglaublich viele keck emotes das hört gar nicht mehr aus
der ist auch nicht schnell business business muss eigentlich sind eigentlich
alle gut
vergessen und das ist der twitch versuch keck w nachzumachen das hat
nicht wirklich geklappt naja so jetzt waren wir ja so ein bisschen
riemen richtig angelaufen ist und dann zeige ich dann erst nicht zeigen auch
aber dann erzähle ich euch mal was wir werden heute etwas was kleines machen
nicht ganz so kompliziert hoffe ich zumindest dass es nicht ganz so
kompliziert ist ein bisschen mal ein bisschen was anderes
ja beach beach music das muss jetzt
sein passt optimal excellente passt exquisite und wie war das mit wärmster
september aller zeiten november ja heute ha proxys eto dank für den
sap dr pro noobs bock league gar keinen nur halb an zwingen ich habe jetzt
versetzt weil es abschucapt gewesen aber bist ja noch subscrite trinken habe ich
hier steht. Äh, ich bin auch schlau.
Ich hab ne Flasche. Hier, Leute. Wasserflasche
trinken hier stehen. Aber ich hab kein Glas mit.
Gut, muss ich. Also das ist so ne Plastikflasche.
Da trink ich ungern raus. Aber
Elbern für heute geht's. Und da Daniel
wieder am Start. Daniel Lull.
Lull HD 3D.
Danke für die Saps,
Leute.
Ja, und zwar.
Ich schalte mal die VM an.
Das wird heute was
kurzes, knackiges, denke ich mal.
Es ist schon 20.23 Uhr.
10 Uhr spätestens muss ich wieder
pennen. Deswegen müssen wir jetzt Bastelchamp machen.
Ja, ja.
Was in die Richtung?
Also, ich
wollte eigentlich warten, bis der Stream richtig angelaufen ist.
Aber irgendwie checkt
Twitch gerade nicht so
richtig.
Mein
2. Account hat gar keine
Notification gekriegt.
Ich hab ja Max FPS reserviert auf
Twitch.
Falls ich das doch mal irgendwann benutzen möchte.
So, erst mal Update machen. Arch, by the way.
Oder soll ich lieber
auf Just Chatting switchen? Ich glaube eigentlich,
dass die Kategorie hier besser ist.
Ich glaube,
die Kategorie hier ist besser.
Erst mal
erst mal updaten.
Ja, also. Ich erzähl euch jetzt einfach mal was.
Und zwar, bei uns auf der Arbeit.
Wir machen ja in letzter Zeit relativ
viel Hipster-Blockchain-Zeug.
Und jetzt
haltet euch mal fest.
Haltet euch mal fest.
Ich weiß gar nicht, wo ich...
Wo ich am besten anfange zu erzählen.
Also, ich hab euch ja schon erzählt,
dass das Selbstbetreiben
diverser Krypto-Blockchain-Nodes
ziemlich
Pain in Gachi-Buzz ist.
Also, das ziemlich, ziemlich
für den Arsch ist.
Die Software ist übelst buggy.
Das kackt ab. Die sinken übelst langsam.
Und gerade
Polygon-Nodes sind ganz abartig.
Zumindest.
Zumindest.
Sie sind jetzt
auf die Chlor-Reiche.
Auf die Idee gekommen.
Beziehungsweise, ich glaube gar nicht,
dass sie wirklich auf die Idee gekommen sind.
Ich glaube, eine sehr gute...
Wie heißt das?
Wie nennen die sich?
Sales-Abteilung.
Oder die, die Leuten was verkaufen wollen.
Hat versucht, ihnen was aufzuschwätzen.
Und zwar
haben sie sich überlegt,
ob sie sich...
Ja, Blockchain ist bei Design langsam.
Es ist die Frage, bei was langsam?
Ja?
Bei was?
Zumindest
war irgend so eine tolle
Sales-Abteilung.
Und hat irgendwie...
Was war vorgestellt?
Ja, Starbucks.
Danke für den Zap.
Wir fangen gleich an.
So.
Und irgendwie
sind sie jetzt...
Was ist denn?
NWG-Look?
Ach so, GTK-Themes anpassen.
Zumindest sind sie jetzt auf die Chlor-Reiche-Idee gekommen.
Sie wollen sich...
Also, weil das so schwierig ist,
eigene, eigene Blockchain-Nodes zu betreiben
und die immer mal Probleme machen,
wollen sie sich jetzt
eine Block...
Jetzt haltet euch.
Haltet euch fest, Leute.
Haltet euch fest.
Eine...
Blockchain-Loadbalancer-Appliance kaufen.
Von den Herstellern sage ich euch nicht.
Von dem Hersteller hat niemand irgendwas gehört bisher.
Die machen ansonsten nix.
Wahrscheinlich irgendein Ami-Startup.
Eine...
Also quasi eine Premium-Blockchain-Loadbalancer-Appliance,
die irgendwie ab 50.000 Euro losgeht.
So.
Und...
Und...
Jetzt haltet euch mal fest,
für was sie die benutzen wollen.
Es ist...
Es ist...
Es ist Blödsinn-Deluxe.
Aber jetzt haltet euch mal fest,
für was sie die benutzen wollen.
Splixxer, danke für den Sub.
Die wollen...
Mal angenommen, man hat...
Tja...
6, 7...
Wie auch immer...
Verschiedene Nodes
für eine spezielle Blockchain.
Es ist egal, was es ist.
Ja?
Nehmen wir mal Polygon,
weil Polygon ist recht, recht beliebt in der Richtung da.
Und...
Jetzt kommt es ja vor,
dass manche Nodes mal out of sync gehen,
weil die Software scheiße ist und buggy ist.
Ja?
Dass die...
Mal out of sync gehen.
Dass die...
Dass die Nodes mal crashen.
Dass...
Ähm...
Mal was...
Bei Maintenance neu gestartet werden muss und sowas.
Und jetzt könnte man ja einfach auf die Idee kommen,
man macht da einen ganz normalen Loadbalancer vor
und der fackelt das Ganze ab.
Was ein normaler Loadbalancer allerdings nicht kann ist,
die API-Endpunkte...
dieser Nodes...
abzufragen und zu gucken,
welche Nodes beziehungsweise welcher Node der neueste ist.
Weil, wie gesagt, die synken sich alle.
Und manche sind ein bisschen schneller gesynkt als andere.
Ja?
Also, einer der Nodes ist halt der, der den aktuellsten Stand hat oftmals.
Oder sagen wir mal...
Sagen wir mal 1, 2, 3 Nodes sind relativ aktuell,
manche hinten dran.
Und diese super krasse Premium Loadbalancer Appliance,
die kann halt die API-Endpunkte abfragen
und dort checken quasi, wie weit welcher Node gesynkt ist.
Und da habe ich gesagt, Leute, ganz im Ernst...
Ups.
Laut irgendwie.
Habe ich gesagt, Leute, ganz im Ernst, ja?
Wenn wir sowas haben wollen,
da müssen wir uns doch keine 50.000 Euro Premium Blockchain Loadbalancer Appliance kaufen.
Da stellen wir eine HA-Proxy hin,
machen drei Zeilen Bash-Skript als Health-Check
und dann funktioniert das auch.
Und ich habe mir gedacht,
ich teste jetzt mal im Stream,
ob an der Aussage überhaupt was dran ist.
Ob das wirklich nur drei Zeilen Bash-Skript sind.
Okay, sagen wir mal so,
wenn es 20 Zeilen Bash-Skript sind, ist auch okay.
Und HA-Proxy und HA-Proxy-Config schreibe ich jetzt auch nicht einfach runter,
mache ich zu selten was dafür.
Das wollte ich mal ausprobieren.
Aber von der Idee her,
von der Idee her muss das super simpel sein.
Wir machen einen Custom Health Check.
In dem Custom Health Check fragen wir die API-Endpunkte.
Das machen wir jetzt so quasi.
Wir bauen jetzt keine Blockchain-Sachen auf,
wir machen ein paar Endpunkte,
die unterschiedliche Werte liefern
und dann gucken wir welche.
So, der Health Check fragt einfach alle unterschiedlichen API-Endpunkte ab,
sortiert die nach dem höchsten Block
und die API-Response mit dem höchsten Block,
die wird halt selected im Health Check für
kriegt allen Traffic.
Wir können sogar so weit gehen,
wir können sogar super advanced sein,
wir können sogar mehrere aktivieren.
Also, und, wie gesagt,
ich hab gesagt, Leute,
ne, wir brauchen keine,
wir brauchen keine 50...
Ja, ich weiß nicht, ob HA-Proxy und Zählzeilen Bash Script Business Enterprise genug sind.
Ganz ehrlich,
die sollen die 50.000 Euro lieber mir geben
oder zwischen den Leuten, die am Projekt mitarbeiten aufteilen,
anstatt sinnlose Appliance zu kaufen.
Die können auch nicht...
Die können...
Leute, ich hab die Idee.
Die sollen mir die 50.000 Euro überweisen
und dann bezahle ich meine Modgis.
Da gibt's dann Modgigehalt.
Da wirst du mal sehen,
wir haben ja ein paar Mods teilweise,
die waren jetzt irgendwie gefühlt Jahre nicht mehr da,
da wirst du sehen, die spawnen auf einmal wieder,
auf einmal alle sind sie wieder da.
So, aktuell sind es ja immer so die gleichen 4, 5.
Da kommt auch der Semparo wieder, ja.
Da hat er genug Kohle dann,
da kann er seine Referendar-Grill,
Referendar-Grills beeindrucken.
Nicht trägt...
69, danke für den Subsplix...
Subsplixer-Pack-Subscription hier.
Ja, jetzt will ich bloß mal testen,
ob das...
ob meine Aussage stimmt,
dass das ja eigentlich nur HA-Proxy
und 10 Zeilen Bash Script sind.
Das werden wir jetzt mal ausprobieren.
Also Ziel ist...
Ich...
Ich rekapituliere das nochmal kurz für euch.
Wir...
Wir...
Wir bauen exemplarisch quasi jetzt...
Wir starten im Prinzip 3 Webserver.
Alle 3 Webserver liefern auf einem APN-Punkt
die gleiche Response,
nur mit unterschiedlichem, ja...
unterschiedlichem Stand.
Und...
Dann bauen wir ein paar Zeilen Bash Script,
Health-Check in HA-Proxy,
der dann das richtige Backend selectet.
Irgendwie so, ich weiß selbst noch nicht genau,
wie wir das machen.
By the way, wie ich sehe,
hast du auch Windows 11.
Ja, leider, leider.
Vielleicht kannst du mir helfen.
Ich habe folgendes Problem mit Windows 11.
Wenn die App im Hintergrund läuft,
beziehungsweise kein Fokus mit der Maus drauf ist,
läuft die App nur auf 4 von 16 Courses.
Windows Magic.
Keine Ahnung.
Ich habe absolut nicht den Leisen.
Schau mal, was da abgeht.
Stimmt irgendwelche Energiesparmaßnahmen.
Ich meine, was du machen kannst,
du kannst deine Energiespar-Settings auf
Performance und Unlimited stellen.
Das...
Das müsste...
Das müsste funzen, ja.
Dann...
Dann...
Dann geht das wahrscheinlich.
Aber...
Aber...
Aber...
Aber...
Aber...
Aber...
Aber...
Aber...
Aber...
Aber...
Aber...
Dann...
Dann geht das wahrscheinlich, so.
Also heute kein krasser IDE-Progressstells, sondern commandlimewmp.
Wir machen mal einen neuen Ordner, nehmen wir mal Aproxhi...
Wir machen das auch nicht, Leute.
Wir machen es auch nicht vercontainerisiert.
Wir machen das ganz simpel.
Oh guck mal.
Ich habe hier einen Snapshot.
Snapshot von was auch immer genau.
Also ich weiß nicht, was das hier ist auf dem Vorschaubild.
Es ist nicht das, was ihr eventuell denken könntet.
Man könnte das Vorschaubild was rein interpretieren.
ist es nicht weil das ein forscher bild von meiner streaming vms und da geht es nur löblich zu erst
mal löschen wir was jetzt zu den abboxen was ist das ziel kann leider nicht zurückspulen okay ich
erkläre es noch mal kurz ich erkläre es noch mal kurz ja die konfektion taxis bild kommt ich ich
erkläre es noch mal kurz also bei mir auf der arbeit wollen sie sich eine 50 mindestens
mindestens 50.000 euro teure premium block chain load balancer appliance kaufen warum das
so teuer ist ich habe keine ahnung was das im endeffekt macht ist folgendes das ist ein
load balancer der die api endpunkte verschiedenster verschiedenster block chain node server abfragen
kann weil man die selbst hostet ja und
kann weil man die selbst hostet ja und
kann weil man die selbst hostet ja und dann die notes die einen besonders aktuellen
dann die notes die einen besonders aktuellen
dann die notes die einen besonders aktuellen stand haben hauptsächlich dorthin den traffic
stand haben hauptsächlich dorthin den traffic
stand haben hauptsächlich dorthin den traffic schickt ne ne block chains voll angesagt so
schickt ne ne block chains voll angesagt so
schickt ne ne block chains voll angesagt so das ist natürlich eine fertige lösung mit
das ist natürlich eine fertige lösung mit
das ist natürlich eine fertige lösung mit einem web ui und ganz nice und ich habe
einem web ui und ganz nice und ich habe
einem web ui und ganz nice und ich habe heute gesagt jungs eigentlich total
heute gesagt jungs eigentlich total
heute gesagt jungs eigentlich total unsinnig das gleiche mache ich mit
unsinnig das gleiche mache ich mit
unsinnig das gleiche mache ich mit proxys und zehn zeilen best script da
proxys und zehn zeilen best script da
proxys und zehn zeilen best script da können sie mir die 50.000 euro überweisen
können sie mir die 50.000 euro überweisen
können sie mir die 50.000 euro überweisen kann ich endlich mal meine mods bezahlen
kann ich endlich mal meine mods bezahlen
kann ich endlich mal meine mods bezahlen so und ich dachte mir ich probiere das
so und ich dachte mir ich probiere das
so und ich dachte mir ich probiere das jetzt mal im stream aus ob an meiner
jetzt mal im stream aus ob an meiner
jetzt mal im stream aus ob an meiner aussage dass man das mit proxys und zehn
aussage dass man das mit proxys und zehn
aussage dass man das mit proxys und zehn zeilen best script auch lösen kann was
zeilen best script auch lösen kann was
zeilen best script auch lösen kann was die 50.000 euro appliance kann ob da was
die 50.000 euro appliance kann ob da was
die 50.000 euro appliance kann ob da was dran ist bei dem es hält zu verbrauchen
dran ist bei dem es hält zu verbrauchen
dran ist bei dem es hält zu verbrauchen ei beef ich hab's ich habe heute morgen
ei beef ich hab's ich habe heute morgen
ei beef ich hab's ich habe heute morgen das beise gelesen dass der chef und der
das beise gelesen dass der chef und der
das beise gelesen dass der chef und der stellvertretende chef irgendwie
stellvertretende chef irgendwie
stellvertretende chef irgendwie weggesetzt bei microsoft microsoft
weggesetzt bei microsoft microsoft
weggesetzt bei microsoft microsoft irgendwie allen mitarbeitern die
irgendwie allen mitarbeitern die
irgendwie allen mitarbeitern die kündigen wollen und job angeboten hat
kündigen wollen und job angeboten hat
kündigen wollen und job angeboten hat und irgendwie einen drittel oder zwei
und irgendwie einen drittel oder zwei
und irgendwie einen drittel oder zwei drittel der belegschaft haben
drittel der belegschaft haben
drittel der belegschaft haben unterschrieben dass sie keinen bock mehr
unterschrieben dass sie keinen bock mehr
unterschrieben dass sie keinen bock mehr haben wenn die nicht den alten chef
haben wenn die nicht den alten chef
haben wenn die nicht den alten chef zurückholen was auch immer als wir
zurückholen was auch immer als wir
zurückholen was auch immer als wir werden sehen wir werden sehen wie
werden sehen wir werden sehen wie
werden sehen wir werden sehen wie findest du security keys das jetzt eine
findest du security keys das jetzt eine
findest du security keys das jetzt eine äußerst allgemeine frage oder meinst du
äußerst allgemeine frage oder meinst du
äußerst allgemeine frage oder meinst du sowas wie yubi key in yubi key und so
sowas wie yubi key in yubi key und so
sowas wie yubi key in yubi key und so was das ist ganz praktisch
was das ist ganz praktisch
was das ist ganz praktisch das geht mit bash man kann custom health
das geht mit bash man kann custom health
das geht mit bash man kann custom health checks mit bash machen das habe ich
checks mit bash machen das habe ich
checks mit bash machen das habe ich sogar schon gemacht ja ist eine gute
sogar schon gemacht ja ist eine gute
sogar schon gemacht ja ist eine gute sache finde ich ist eine gute sache das
sache finde ich ist eine gute sache das
sache finde ich ist eine gute sache das problem ist das problem ist einfach mal
problem ist das problem ist einfach mal
problem ist das problem ist einfach mal aus so bin ich mach mal ich habe wie
aus so bin ich mach mal ich habe wie
aus so bin ich mach mal ich habe wie gesagt wir perfekt wir verkonzentrieren
gesagt wir perfekt wir verkonzentrieren
gesagt wir perfekt wir verkonzentrieren das auch gar nicht oder sonst was das
das auch gar nicht oder sonst was das
das auch gar nicht oder sonst was das ist einfach direkt auf der vm und gut
ist einfach direkt auf der vm und gut
ist einfach direkt auf der vm und gut ist jetzt einfach mal ha proxy und gut
ist jetzt einfach mal ha proxy und gut
ist einfach direkt auf der vm und gut ist man muss es ja nicht übertreiben
ist man muss es ja nicht übertreiben
ist man muss es ja nicht übertreiben also ich habe gedacht unser setup unser
also ich habe gedacht unser setup unser
also ich habe gedacht unser setup unser setup zum testen wird ganz easy ja wir
setup zum testen wird ganz easy ja wir
setup zum testen wird ganz easy ja wir haben wir haben nicht mehr haben nur
haben wir haben nicht mehr haben nur
haben wir haben nicht mehr haben nur eineinhalb stunden heute zeit und das
eineinhalb stunden heute zeit und das
eineinhalb stunden heute zeit und das setup wird ganz easy wir machen
setup wird ganz easy wir machen
setup wird ganz easy wir machen verzeichnis da kommt eine ha proxy
verzeichnis da kommt eine ha proxy
verzeichnis da kommt eine ha proxy konfreien ha proxy konf muss mir gleich
konfreien ha proxy konf muss mir gleich
konfreien ha proxy konf muss mir gleich minimal beispiel im internet suchen weil
minimal beispiel im internet suchen weil
minimal beispiel im internet suchen weil ich weil ich die immer nicht nicht auf
ich weil ich die immer nicht nicht auf
ich weil ich weil ich die immer nicht nicht auf die reihe kriege so und dann
die reihe kriege so und dann
die reihe kriege so und dann machen wir dann starten wir sagen wir mal
machen wir dann starten wir sagen wir mal
machen wir dann starten wir sagen wir mal zwei endpunkte reicht da wenn man das
zwei endpunkte reicht da wenn man das
zwei endpunkte reicht da wenn man das lokal war mit zwei probiert ja wir
lokal war mit zwei probiert ja wir
lokal war mit zwei probiert ja wir machen wir starten wir starten 22 http
machen wir starten wir starten 22 http
machen wir starten 22 http server ein auf port 8000 und ein auf port
server ein auf port 8000 und ein auf port
server ein auf port 8000 und ein auf port 8001 das war jetzt das war jetzt auch
8001 das war jetzt das war jetzt auch
8001 das war jetzt das war jetzt auch gleich mal nach port 8000 und nach ports
gleich mal nach port 8000 und nach ports
gleich mal nach port 8000 und nach ports 8001 und da drin http server oder
8001 und da drin http server oder
8001 und da drin http server oder starten wir jetzt ein auf port 8000
starten wir jetzt ein auf port 8000
starten wir jetzt ein auf port 8000 oder 8000 moment falsch rum auf 8001
oder 8000 moment falsch rum auf 8001
oder 8000 moment falsch rum auf 8001 und auf 8000 so das ist unser setup
und auf 8000 so das ist unser setup
und auf 8000 so das ist unser setup aktuell machen die beiden http server
aktuell machen die beiden http server
aktuell machen die beiden http server noch nix außer ein leeres ein leeres
noch nix außer ein leeres ein leeres
noch nix außer ein leeres ein leeres directory listing zu zurückzugeben gibt
directory listing zu zurückzugeben gibt
directory listing zu zurückzugeben gibt es ein irgendein grund für abrock sie
es ein irgendein grund für abrock sie
es ein irgendein grund für abrock sie ja ich hab's jetzt schon dreimal erklärt
ja ich hab's jetzt schon dreimal erklärt
ja ich hab's jetzt schon dreimal erklärt aber ich erkläre es noch einmal schnell
aber ich erkläre es noch einmal schnell
aber ich erkläre es noch einmal schnell das stream stream fängt ja an was ist
das stream stream fängt ja an was ist
das stream stream fängt ja an was ist das für eine shell nee das ist zsh also
das für eine shell nee das ist zsh also
das für eine shell nee das ist zsh also ich erkläre es noch mal kurz bei mir
ich erkläre es noch mal kurz bei mir
ich erkläre es noch mal kurz bei mir auf der arbeit wollen sie sich eine
auf der arbeit wollen sie sich eine
auf der arbeit wollen sie sich eine 50.000 euro teure laut balancer
50.000 euro teure laut balancer
50.000 euro teure laut balancer appliance kaufen und ich war mal so
appliance kaufen und ich war mal so
appliance kaufen und ich war mal so mutig und habe gesagt jungs warum
mutig und habe gesagt jungs warum
mutig und habe gesagt jungs warum kaufen wir so ein schwachsinn das
kaufen wir so ein schwachsinn das
kaufen wir so ein schwachsinn das gleiche kann man mit haar proxy und zehn
gleiche kann man mit haar proxy und zehn
gleiche kann man mit haar proxy und zehn zeilen best script machen und ich wollte
zeilen best script machen und ich wollte
zeilen best script machen und ich wollte es mal ausprobieren ob das etwas zu
es mal ausprobieren ob das etwas zu
es mal ausprobieren ob das etwas zu übertrieben war meine aussage und ob
übertrieben war meine aussage und ob
übertrieben war meine aussage und ob das wirklich geht ich bin mir ziemlich
das wirklich geht ich bin mir ziemlich
das wirklich geht ich bin mir ziemlich sicher dass es geht sonst hätte ich das
sicher dass es geht sonst hätte ich das
sicher dass es geht sonst hätte ich das nicht einfach erzählt
nicht einfach erzählt
nicht einfach erzählt das will ich nicht wie gesagt man kann
das will ich nicht wie gesagt man kann
das will ich nicht wie gesagt man kann custom best health checks machen das
custom best health checks machen das
custom best health checks machen das weiß ich das weiß ich habe ich sogar
weiß ich das weiß ich habe ich sogar
weiß ich das weiß ich habe ich sogar schon gemacht aber ich weiß aus dem kopf
schon gemacht aber ich weiß aus dem kopf
schon gemacht aber ich weiß aus dem kopf nicht wie ja gibt's gibt's aber ha proxy
nicht wie ja gibt's gibt's aber ha proxy
nicht wie ja gibt's gibt's aber ha proxy ist pock für sowas für dich wieso für
ist pock für sowas für dich wieso für
ist pock für sowas für dich wieso für so custom basteln finde ich es ab
so custom basteln finde ich es ab
so custom basteln finde ich es ab oxy gut also sie haben die haben alle
oxy gut also sie haben die haben alle
oxy gut also sie haben alle seine vorteile finde ich kann die hat der
seine vorteile finde ich kann die hat der
seine vorteile finde ich kann die hat der vorteil letzten crypts integriert und
vorteil letzten crypts integriert und
vorteil letzten crypts integriert und super easy aufzusetzen dafür sind
super easy aufzusetzen dafür sind
super easy aufzusetzen dafür sind kompliziertere setups nicht richtig
kompliziertere setups nicht richtig
kompliziertere setups nicht richtig möglich traffic ist gut im
möglich traffic ist gut im
möglich traffic ist gut im containerisierung umfeld hat aber eine
containerisierung umfeld hat aber eine
containerisierung umfeld hat aber eine abartig abfahrt config nx ist ein
abartig abfahrt config nx ist ein
abartig abfahrt config nx ist ein schönes allround ding und ha proxy
schönes allround ding und ha proxy
schönes allround ding und ha proxy finde ich top wenn man wenn man wenn
finde ich top wenn man wenn man wenn
finde ich top wenn man wenn man wenn man ein bisschen custom basteln will
man ein bisschen custom basteln will
man ein bisschen custom basteln will er habe ich auch schon gehört die
er habe ich auch schon gehört die
er habe ich auch schon gehört die sollen wir das überweisen kann ich meine
sollen wir das überweisen kann ich meine
sollen wir das überweisen kann ich meine mods bezahlen
mods bezahlen
mods bezahlen es ist schon ganz schön wenig oder dafür
es ist schon ganz schön wenig oder dafür
es ist schon ganz schön wenig oder dafür gibt es kein super premium business
gibt es kein super premium business
gibt es kein super premium business laut balancer aber wie gesagt die geht
laut balancer aber wie gesagt die geht
laut balancer aber wie gesagt die geht ab 50.000 euro los und wahrscheinlich
ab 50.000 euro los und wahrscheinlich
ab 50.000 euro los und wahrscheinlich also das sind ja da sind ja hardware
also das sind ja da sind ja hardware
also das sind ja da sind ja hardware appliance dinger und da wird man sich
appliance dinger und da wird man sich
appliance dinger und da wird man sich wahrscheinlich auch nicht einkaufen
wahrscheinlich auch nicht einkaufen
wahrscheinlich auch nicht einkaufen sondern wahrscheinlich drei oder so also
sondern wahrscheinlich drei oder so also
sondern wahrscheinlich drei oder so also es ist es ist unsinnig wir probieren
es ist es ist unsinnig wir probieren
es ist es ist unsinnig wir probieren das jetzt mal aus ich versuche das
das jetzt mal aus ich versuche das
das jetzt mal aus ich versuche das ganze mal nachzustellen
ganze mal nachzustellen
ganze mal nachzustellen also wir haben zwei wir haben zwei backends
also wir haben zwei wir haben zwei backends
also wir haben zwei wir haben zwei backends ja auf port 8000 und 8001 so die
ja auf port 8000 und 8001 so die
ja auf port 8000 und 8001 so die backends die sollen ja wir tun mal so
backends die sollen ja wir tun mal so
backends die sollen ja wir tun mal so als hätten die in api endpunkt und
als hätten die in api endpunkt und
als hätten die in api endpunkt und legen jetzt einfach mal der datei hin
legen jetzt einfach mal der datei hin
legen jetzt einfach mal der datei hin api jason ok so api jason und da und da
api jason ok so api jason und da und da
api jason ok so api jason und da und da kommt jetzt als als antwort wenn man
kommt jetzt als als antwort wenn man
kommt jetzt als als antwort wenn man den endpunkt kalt zurück block id oder
den endpunkt kalt zurück block id oder
den endpunkt kalt zurück block id oder einfach nur block wir simulieren mal die
einfach nur block wir simulieren mal die
einfach nur block wir simulieren mal die die crypto crypto notes api block all
die die crypto crypto notes api block all
die die crypto crypto notes api block all die beste beste blog id
die beste beste blog id
die beste beste blog id so sie die aus und hier unten mal das
so sie die aus und hier unten mal das
so sie die aus und hier unten mal das gleiche api punkt jason und der liefert
gleiche api punkt jason und der liefert
gleiche api punkt jason und der liefert so und der liefert blog da muss jetzt
so und der liefert blog da muss jetzt
so und der liefert blog da muss jetzt halt irgendeine höhere liefern der liefert
halt irgendeine höhere liefern der liefert
halt irgendeine höhere liefern der liefert der moment jetzt habe ich missgemacht
der moment jetzt habe ich missgemacht
der moment jetzt habe ich missgemacht der liefert keine ahnung hier 8 1 1 so
der liefert keine ahnung hier 8 1 1 so
der liefert keine ahnung hier 8 1 1 so also also der server der auf also der
also also der server der auf also der
also also der server der auf also der dienst auf 8000 läuft der liefert eine
dienst auf 8000 läuft der liefert eine
dienst auf 8000 läuft der liefert eine höhere block all die über über den
höhere block all die über über den
höhere block all die über über den endpunkt das reicht eigentlich auch
endpunkt das reicht eigentlich auch
endpunkt das reicht eigentlich auch schon was für am becken brauchen wenn
schon was für am becken brauchen wenn
schon was für am becken brauchen wenn man das jetzt gehört api jason dann
man das jetzt gehört api jason dann
man das jetzt gehört api jason dann kriegt man hier einmal blog 763 und
kriegt man hier einmal blog 763 und
kriegt man hier einmal blog 763 und hier kriegt man blog 783 so also wenn
hier kriegt man blog 783 so also wenn
hier kriegt man blog 783 so also wenn unsere proxy health check
unsere proxy health check
unsere proxy health check best health check funktioniert sollte der
best health check funktioniert sollte der
best health check funktioniert sollte der immer diesen endpoint selekten weil der
immer diesen endpoint selekten weil der
immer diesen endpoint selekten weil der die höhere blog id hat negativ
die höhere blog id hat negativ
die höhere blog id hat negativ latency ja genau ich returne einfach daten
latency ja genau ich returne einfach daten
latency ja genau ich returne einfach daten die es noch gar nicht gibt man hat
die es noch gar nicht gibt man hat
die es noch gar nicht gibt man hat ja gesehen wie gut zwar stadia lief mit
ja gesehen wie gut zwar stadia lief mit
ja gesehen wie gut zwar stadia lief mit negativ lägen sie so frage an euch chat
negativ lägen sie so frage an euch chat
negativ lägen sie so frage an euch chat hat man verstanden was ich machen will
hat man verstanden was ich machen will
hat man verstanden was ich machen will kurz was trinken er stimmt wir sollten
kurz was trinken er stimmt wir sollten
kurz was trinken er stimmt wir sollten das sollte selekten so ein einfaches
das sollte selekten so ein einfaches
das sollte selekten so ein einfaches krepp tut es nicht okay exzellent
krepp tut es nicht okay exzellent
krepp tut es nicht okay exzellent exzellent da müssen wir jetzt erst mal
exzellent da müssen wir jetzt erst mal
exzellent da müssen wir jetzt erst mal anfangen eine ha proxy kopf zu bauen
anfangen eine ha proxy kopf zu bauen
anfangen eine ha proxy kopf zu bauen und ha proxy minus c oder sowas ist es
und ha proxy minus c oder sowas ist es
und ha proxy minus c oder sowas ist es wahrscheinlich nein ist es nicht es ist
wahrscheinlich nein ist es nicht es ist
wahrscheinlich nein ist es nicht es ist ha proxy minus f der page respekt die
ha proxy minus f der page respekt die
ha proxy minus f der page respekt die ganze zeit ha proxy kopf wird dann
ganze zeit ha proxy kopf wird dann
ganze zeit ha proxy kopf wird dann starten wir das mal wie sieht so eine
starten wir das mal wie sieht so eine
starten wir das mal wie sieht so eine ha proxy kopf aus ich kann es mir immer
ha proxy kopf aus ich kann es mir immer
ha proxy kopf aus ich kann es mir immer ums verrecken nicht merken
ums verrecken nicht merken
ums verrecken nicht merken ha proxy kopf minimal example konflikt
ha proxy kopf minimal example konflikt
ha proxy kopf minimal example konflikt file example proxie konflikt proxie
example proxie konflikt proxie
example proxie konflikt proxie basics ich bilde mir ein mit front end das
basics ich bilde mir ein mit front end das
basics ich bilde mir ein mit front end das geht so gar nicht mehr
geht so gar nicht mehr
geht so gar nicht mehr ja genau genau genau ja der übertreiben
ja genau genau genau ja der übertreiben
ja genau genau genau ja der übertreiben es aber hier ha proxy konflikt ja hier
es aber hier ha proxy konflikt ja hier
es aber hier ha proxy konflikt ja hier ist es doch dass die offizielle
ist es doch dass die offizielle
ist es doch dass die offizielle anleitung das beste minimal konflikt
anleitung das beste minimal konflikt
anleitung das beste minimal konflikt sehr schön sehr gut also minimal mode
sehr schön sehr gut also minimal mode
sehr schön sehr gut also minimal mode tcp und ich erkläre euch jetzt auch
tcp und ich erkläre euch jetzt auch
tcp und ich erkläre euch jetzt auch warum weil willst du da luas krebs aus
warum weil willst du da luas krebs aus
warum weil willst du da luas krebs aus will nein ich will ich will den best
will nein ich will ich will den best
will nein ich will ich will den best health health check
health check
health check best health check skript hinterlegen was
best health check skript hinterlegen was
best health check skript hinterlegen was alle fünf sekunden ausgeführt wird wenn
alle fünf sekunden ausgeführt wird wenn
alle fünf sekunden ausgeführt wird wenn du irgendwie ahnung hast wie man nur
du irgendwie ahnung hast wie man nur
du irgendwie ahnung hast wie man nur skript innerhalb und proxyl ua haben die
skript innerhalb und proxyl ua haben die
skript innerhalb und proxyl ua haben die eben nur ab plug-in 5 ways to extend
eben nur ab plug-in 5 ways to extend
eben nur ab plug-in 5 ways to extend proxyl ua ok gucken wir mal ob das meine
proxyl ua ok gucken wir mal ob das meine
proxyl ua ok gucken wir mal ob das meine proxys überhaupt hat ja global upload und
proxys überhaupt hat ja global upload und
proxys überhaupt hat ja global upload und was macht das jetzt patches converters
was macht das jetzt patches converters
was macht das jetzt patches converters action service
action service
action service nee ich glaube ich glaube ich will kein
nee ich glaube ich glaube ich will kein
nee ich glaube ich glaube ich will kein luas krebs verwenden ehrlich gesagt als
luas krebs verwenden ehrlich gesagt als
luas krebs verwenden ehrlich gesagt als es mir glaube ich etwas zu zu high iq
es mir glaube ich etwas zu zu high iq
es mir glaube ich etwas zu zu high iq jetzt ich meine das hier ist schon das
jetzt ich meine das hier ist schon das
listen weil da kann man hier irgendwie
listen weil da kann man hier irgendwie
listen weil da kann man hier irgendwie sowas sagen wenn ich
sowas sagen wenn ich
ich jetzt richtig aus dem kopf hin krieg oder sternchen sternchen irgendwie das
ist auf 8000 lauscht dass man kurz checken ob das jetzt funktioniert
proxy minus f ein was passing charakters noch zu portet vermitteln das auch wie
ging das noch mal oder war das iphone listen app einmal die unten steht ja die
band die band adresse ok proxy soll auf 80 80 lauschen der proxy läuft gucken
wir mal proxy leitet weiter auf port mainz server weiterleiten geht konnte
man konnte man die server nicht einfach hier unten reinschreiben doch mehr das
ging auch okay geht auf port 8000 ok das sollte das sollte jetzt schon
funktionieren guck mal curl also wir gehen auf die
lautball wir gehen auf die lautballe auf den laut balance endpunkt und wir kommen
hier unten auf dem auf port 80
8000
raus okay das funktioniert also mit minimal konflikt proxys schon mal ja das
könnte man auch machen aber wie gesagt ich ich ich ich setze
aktuell auf den externen health check im h proxys auf so jemand ob man habe ich
habe ich vor langer zeit verwendet habe ich aufgegeben weil wir zu waren wir zu
ätzend deswegen habe ich jetzt das in der vm
laufen so dann machen wir mal wie war das war mal proxys
proxys external checks ich habe das schon mal gemacht das ist zwar schon
bestimmt fünf jahre oder so her aber ich kann mich noch verhältnismäßig gut für
das wie lange das her ist daran erinnern also ich weiß es gab genau external
checks example es gibt genau option genau das genau genau genau das kommt
mir noch bekannt vor das bräuchte das braucht man option external check external check
Da kann man nämlich, also wenn ich das noch richtig in Erinnerung habe, dann konnte man, ich bin mir jetzt nicht sicher, ob das auf Global musste oder hier hin, ich glaube das muss hier hin.
Also man kann HA-Proxy sagen, dass er, also wir brauchen übrigens zwei Server im Backend, also einen auf 8001 und einen auf 8000.
Also man kann, wenn ich das richtig im Hinterkopf habe, HA-Proxy sagen, führe einen Custom Health Check aus.
Und zwar in dem Fall hier den da, den machen wir jetzt mal einen eigenen hier.
Touch Check.sh
In Bash
chmod
Plus X
Check
Hier
So, und, ups.
So, External Command.
So, und wenn ich das richtig zusammenkriege noch aus dem Kopf, dann ist das jetzt so.
Das HA-Proxy alle Sekunde oder alle 5 Sekunden, das kann man dann irgendwie einstellen, dass der diesen Check ausführt und wenn der Check erfolgreich ist für das jeweilige Backend, dann bleibt das aktiv, ansonsten wird das down genommen.
Das heißt, alle Backends, von denen ich nicht möchte, dass die Traffic abbekommen, sollen down sein.
So, und das müsste eigentlich...
...eigentlich funktionieren.
Ich führe mal HA-Proxy jetzt aus und gucke, ob es prinzipiell geht und nicht crasht.
Bam, geht kaputt.
Was hat er für Schmerzen?
Option External Check.
Unable to find Global External Check.
Okay.
Brauche ich noch eine Global Section.
Okay.
Was hat er hier?
Insecure Fork Wanted.
Not enabled in the Global Section.
Also eins muss man HA-Proxy nämlich zu Gute halten.
Also eins muss man HA-Proxy nämlich zu Gute halten.
Die haben erstaunlich gute Docs.
Die haben erstaunlich gute Docs.
Sieht zwar aus wie 1995, aber die sind natürlich ganz gut beschrieben.
Sieht zwar aus wie 1995, aber die sind natürlich ganz gut beschrieben.
By default, HA-Proxy tries hard to prevent any threats and process creation of the...
By default, HA-Proxy tries hard to prevent any threats and process creation of the...
Okay, ja das brauche ich.
Das ergibt Sinn.
So, und wenn ich das jetzt richtig gemacht habe,
dann sollte dieses Check-Skript,
dann sollte dieses Check-Skript,
schreibe mal echo123 rein,
sollte dieses Check-Skript
regelmäßig ausgeführt werden.
sollte dieses Check-Skript, regelmäßig ausgeführt werden.
Wird es aber nicht
Warum?
Chat, wenn ihr irgendwelche Questions habt
Dann schreibt es mit AdWoblos rein
Weil ich muss mich gerade konzentrieren
Habe ich irgendwas vergessen?
Can't use external check
Wie hat der das konfiguriert?
Server
Ah
Ah, man muss check dahinter schreiben, dass er was checkt
Ja, die Syntax
Die Syntax von HA-Proxy ist etwas
Kryptisch, aber es funktioniert gut
Jawohl
Okay, er führt mein Custom-Script aus
Sehr gut, sehr gut
Exzellent, das finde ich gut
Okay, und jetzt brauche ich nur noch ein Example
Example HA-Proxy
External check
Weil ich kann mich noch daran erinnern
Da werden
Variablen übergeben
An das Script
Anhand dessen kann man erkennen
Für welchen Endpunkt das gerade ausgeführt wird
Mario, auch mal wieder am Start
Moin, danke für den Sub
How to write an external health check
External
Ach, guck mal
Hier haben sie doch ein Beispiel für
Variablen sind
Hier, also
Dollar 1 ist Virtual Service IP
Also im Prinzip die IP vom Server
Okay, Port
Real Server, also der eigentliche Endpunkt
Der angesprochen wird
Und
Check Source IP
Check Source IP
Was soll die Check Source IP sein?
Okay, wir gucken mal
Was der HA-Proxy dazu sagt
Die IP vom Server
Ah, ja
Das kann tatsächlich sein
Das kann tatsächlich sein
Ja
Command ist der external command to run
Und das ist der external command to run
The arguments passed to the commands are
Proxy address, proxy port, server address, server service port
Okay, das war's der andere geschrieben
Andere war bestimmt JetGPT
Generated
Some values are also provided through environment
Okay, HA-Proxy address
Backend ID, backend name
HA-Proxy port
Server address
Connection, server ID, server name
Okay, das war's der andere geschrieben
Port protokollfahrt
Ja, eigentlich nix
Nix, was ich brauche
Kriegst du beim external script alle Backends
Oder muss das Script sehr statisch sein?
Nee, ich krieg nicht alle Backends
Aber das ist nicht schlimm
Ich kenne ja alle Backends
Die schreib ich da rein
Ansonsten crepp ich sie mir aus der HA-Proxy-Conf
Guck mal, ich auch mal
Wir creppen uns die einfach aus der HA-Proxy-Conf
Easy
Ja
Crepp
Server
check bist aber okay alter proxys mensch so jetzt aber und dann hat es aber guckt haben
wir uns sogar die ärzte haben uns sogar die apps rausgeholt aus der proxys konf exzellent
so dann probieren wir das mal auf ich bin gespannt da machen wir das genau so wir holen
uns das hier raus gucken mal ob das ob das läuft easy hacker man stellt genau minus f
proxys minus f es läuft okay er kriegt er kriegt raus sehr schön nice dann okay jetzt kommen die
ersten an useless use of cat ja meinetwegen proxys aber ich finde das einfach viel angenehmer so
so dann nennen wir das mal endpoints das ist so der beste name der mir einfällt dafür endpoints
so chat pfeiffer time dann was übergibt dafür variablen proxy adress proxy port okay machen
wir mal so was hier viel service ip oder service service host oder sowas dollar 1
service ports dollar 2 was war das nächste server address also quasi
ya beschloss mall
dann zählen wir das noch hoch jetzt bin ich mal gespannt welches könnte er für ein server empfehlen
Nehmt Debian und gut ist.
Es sei denn, du hast spezielle Anforderungen,
dann eventuell was anderes.
Debian, kannst auch Ubuntu nehmen.
Kannst auch,
wenn du ganz hart drauf bist,
CentOS nehmen oder sowas,
aber das ist im
Enterprise-Umfeld geht mir das schon auf den Sack.
Ich würde einfach default Debian nehmen
und gut ist.
Rocky, genau. Rocky, Alma, Linux,
wenn man eher die Red Hat
Schiene will.
So, also,
was machen wir denn jetzt? Jetzt machen wir eine Schleife
vor Endpoint
vor Endpoint
in Endpoints.
Do
Echo
Endpoint. Aber das ist jetzt
noch nicht die hohe Kunst.
Wir führen das mal von Hand aus, um zu gucken,
ob es funktioniert. Also, das
interessiert mich nicht.
Kunst. Kunst hast du wirklich?
Kunst wirklich?
So,
so, Endpoint in Endpoints.
Was wollen wir jetzt machen?
Ich will jetzt checken,
ob die Server hier,
meine Web-Server-Endpunkte,
also meine Web-Server-API-Endpunkte,
ob die laufen.
Das mache ich einfach mal mit einem Curl.
Leute, ich habe ein Problem.
Ich habe vorhin zwei
Riesenteller Nudeln gefuttert.
Ich muss mal kurz,
ich muss mal kurz
auf Klo.
Oh, ich bin in 5 Minuten
wieder da.
Und dann haben wir noch eine Stunde genau Zeit,
das zu vollenden.
Ich bin gleich wieder da.
Ich bin wieder am Start. Weiter geht's.
Wo sind wir stehen geblieben?
Genau. Bash, Bash-Skript.
So, wir gehen alle Endpunkte
aus der HA-Proxy-Config durch.
Und jetzt
muss ich mal überlegen, was machen wir?
Ich will fest, also ich brauche hier erstmal so eine Art
Health-Check. Da machen wir einfach einen Curl.
So, Curl.
Local Host API.
Schreibe mal http davor.
Einmal ein Curl.
Auf 8080 läuft nix.
Weil HA-Proxy
aus ist. Das ist schon mal gut.
So, auf 8001 läuft was.
Auf 8002 läuft nix.
Wir wollen
keine Error-Ausgabe
haben. Okay, gut.
Und hier kriegen wir Jason
zurück. Das heißt, das pipen wir nach JQ
und holen uns
das Feld
mit Block raus. Genau das wollen
wir haben.
Eats Nudeln mit Lachs, Alter.
Ist klar, Leute.
Ich weiß nur, weil ich euch nicht
viel mehr erzähle, was ich sonst so esse.
Heißt nicht, dass ich nur immer Nudeln mit Lachs
futter.
So, nehmen wir das mal so hier. Irgendwie Response.
So, was brauchen wir denn jetzt?
Jetzt muss ich mal kurz in mich gehen.
Also, hier muss auf jeden Fall
schon mal Quotes drumherum.
Bin mir auch nicht ganz sicher, warum. Aber ist auf jeden Fall
nicht verkehrt. Und hier kommt
der Endpoint rein.
Aber auch nicht auf Port 8001,
sondern direkt so.
Mach doch mal einen Koch-Stream.
Na, ich weiß nicht.
Ich weiß ja nicht.
Da gibt's noch Leak im Kochdeckel oder so.
Im Topfdeckel.
So.
Jetzt haben wir hier das Result drinnen.
Von diesem Curl.
Die einzige Sache, wo
ich mir nicht ganz sicher bin, ist,
was passiert, wenn es Jason,
was der Server, returnt,
ein Error
hat.
Zumindest würde ich sagen, wir checken jetzt einfach
erstmal, ob in der Response
was drin ist. Weil, ihr habt's ja gesehen.
Oder wir können es ja mal ausprobieren.
Okay, nix macht das JQ.
Das ist gut. Also, wenn man was
curlt von einem nicht erreichbaren Server,
dann
gibt's keine Ausgabe. Das heißt, wir checken
jetzt erstmal. Leute, wenn ihr übrigens bessere
Ideen habt, wie man das nicer
machen kann, in Bash
oder was ich hier mache, könnt ihr ruhig
in den Chat schreiben. Vielleicht haben wir hier die richtig krassen Ideen.
Da ist ein Bash-Hackermans dabei.
So, wir checken jetzt, ob
ähm, ob
das nicht
leer ist.
Übrigens, das ist Bash-Logik. Wer sich fragt,
ein If muss man immer mit einem V beenden.
Warum? Man weiß es nicht.
Ein Vor beendet man mit Dann
und nicht mit Rof.
Bash-Logik.
Das hat sich irgendeiner vor 65 Jahren ausgedacht.
Man weiß nicht mehr, warum das so ist.
Letztens Video von meinem Klo gesehen.
Ja, das ist so beliebt, das Video von
meinem Klo, dass sogar
irgendein russischer, russischer
ähm, ja so
Sanitärhandel
Lampen, äh, russischer
Sanitärhandels-Shop das Video
geklaut hat davon.
Und re-uploaded hat.
Kann man sich nicht vorstellen, was da los ist.
Dass die sich selbst
da einfach ein Video machen können.
Vor allem auf einem russischen Channel, so ein Typ, der
Deutsch redet und in seinem
Badezimmer ist. Komplett random.
Was denken sich die Zuschauer da?
Ein Video gerippt.
So, also wir testen, ob das,
ah, ich bin mir nicht ganz sicher, okay, Chat,
ich muss mal, ich muss mal überlegen, wie wir das jetzt machen.
Wo findet man das Klo-Video?
Auf YouTube.
Wo ist es einfach bei mir? Hier.
Klo. Es gibt zwei, es gibt zwei
Klo-Videos. Eins von 2017,
wo ich das Ding
so neu gar nicht hatte.
Weil wir sind 2013
hier eingezogen, also im Prinzip so lang,
so lang habe ich das dann schon.
Und,
ja, hier habe ich
Fazit gemacht. Acht Jahre
Premium-Klo. Das ist
richtig, ja. Ich habe mir das noch gar nicht so genau
überlegt.
Zumindest, also, wenn
das Ergebnis nicht leer ist,
dann, wir geben das
einfach mal aus. Okay, wir geben das einfach
mal aus. Wir geben,
Leute, ich weiß, ich weiß,
wie wir das machen. Ich weiß, wie wir das machen.
Pfeifert-Idee. Ich glaube, das
funktioniert richtig gut. Das müssen wir
mal ausdrehen. Okay, wir geben,
wir geben die Response aus
von dem Endpunkt
und
dann
schreiben wir uns noch den
Endpoint dahinter.
So, und jetzt, und jetzt passt mal auf.
Passt mal auf. Wenn ich das jetzt von Hand ausführe,
dann kommt jetzt hier raus,
der ist bei dieser Blocknummer,
also der ist bei dieser Blocknummer
und der ist bei dieser Blocknummer.
Was ich jetzt machen kann, ist, ich kann das einfach
numerisch sortieren
und
Reverse Sorten
und dann habe ich immer
die
äh, Reverse Sorten?
Ja, Reverse Sorten, genau.
Dann habe ich immer, immer den höchsten,
den Endpoint mit dem höchsten
Block als erstes.
Heißt,
heißt, wir können
das eigentlich so lassen
und schreiben die gesamte
Schleifenausgabe,
wobei, ja,
nee, das geht doch, glaube ich, noch nicht.
Ich kann doch, ich kann doch theoretisch hier einfach
ein Sort minus N minus R hintendran hängen
und dann machen wir ein Head minus 1
und nehmen immer, äh, ein Head, äh,
ein Head minus N 1
und dann kriegen wir immer den Endpoint raus,
genau, dann kriegen wir immer den Endpoint raus
mit der höchsten, mit der höchsten, mit den höchsten Blocks.
So, jetzt kriegen wir aktuell den hier raus.
Jetzt schalte ich den mal aus
und jetzt kriege ich den da oben raus.
Das passt doch wunderbar.
Was passiert, wenn beide aus sind?
Dann geht's bestimmt kaputt.
Dann kommt nichts als Ausgabe.
Eigentlich ziemlich gut.
Easy 5K, denke ich auch.
Äh, 50K.
So.
Und was müssen wir jetzt machen?
Äh, ich brauche den Output nochmal.
Den Capturen wir auch nochmal eine Variable.
Das ist ja immer der
Endpunkt, der jetzt quasi
ausgewählt wurde
mit,
mit dem aktuellsten Stand.
Schreibt noch eine Error-Message, ja.
Nennen wir das mal
Selected.
Se-lected.
Nennen wir das mal Selected.
So.
Und jetzt,
jetzt muss ich erstmal testen, ob das überhaupt funktioniert, was ich hier,
was ich hier gebaut hab.
Ich, ich lass das grad nochmal kurz ausführen vom HA-Proxy und guck mal, was dann passiert.
Okay, er, er fragt beide Endpunkte regelmäßig ab.
Nice, nice, das ist schonmal gut.
So, dann machen wir das mal so.
Dann machen wir jetzt mal eine Ausgabe.
Machen wir mal irgendwie, ähm, ja.
Highest Block.
Achso, den hab ich ja gar nicht an der Stelle.
Den muss ich mir erstmal irgendwie rausholen.
Highest Block.
Und, und dann machen wir noch irgendwie,
was ich für einen Endpunkt ausgewählt hab.
Äh, ja.
Endpoint.
Einfach Block.
Endpoint.
So.
Zumindest das sollte jetzt schonmal leer in der HA-Proxy, in dem Log auftauchen.
Ja.
War für eine Zeit weg.
Haben drei Zeilen Bash bisher gereicht?
Naja.
Drei Zeilen Bash ist vielleicht ein bisschen übertrieben gewesen.
Aber mit 20 kommen wir vielleicht hin.
Mal gucken.
So.
Ne, ich glaub mit 20 kommen wir auch nicht ganz hin.
So.
Jetzt muss ich mir dort erstmal rausholen.
Warte mal hier.
Echo Selected.
Was steht denn da jetzt drinnen nochmal?
Was steht da?
Das steht drinnen.
Das da.
Okay.
Also, das heißt, das cutten wir an einem Leerzeichen.
Nehmen dann Feld 1.
Und das wird unser, unser Target.
Oder Selected.
Oder ach, wie auch immer.
Mein Endpoint.
Ne, wenn, wenn, wie ist denn das?
Ist doch wurscht, wie das heißt.
Ähm.
So.
Target.
Also das, wo wir dann im Endeffekt, was wir ausgewählt haben.
Dann brauchen wir das gleiche nochmal.
Und das nennen wir.
Die, ist die Block Id.
Ne, falsch rum.
Das ist das Target.
Das ist die Block.
Oder?
Ja.
So.
Block Id.
Target.
Gucken wir mal, ob das bis hierhin funzt.
Okay.
Block ist der höchste.
7, 8 ist der höchste.
Lass mal.
Mach mal.
Ich mach, ich mach mal kurz aus.
Ich mach mal kurz aus.
7, 6.
Guck mal, wie gut das funktioniert.
So, wie gut das funktioniert.
Okay.
So.
So.
So.
So.
So.
Guck mal, wie gut das funktioniert.
Erst Res und Endpoint in Selected kombinieren und dann wieder splitten.
Aber geht das denn?
Geht das denn anders irgendwie?
Ne, das muss ich kombinieren, damit ich es, damit ich es sortieren kann.
Und danach, wenn ich das Ergebnis hab, will ich es wieder splitten.
Ja, Bash.
Bash ist halt ein bisschen pepeger in der Richtung, aber muss ich halt dran, dran gewöhnen
mal.
Wenn man, wenn man eine Zeit lang mit Linux unterwegs ist, denkt man so ein bisschen in,
in Bash-Logik schon.
Okay.
Dann, ob wir das so überhaupt ausgeben?
Ich hab eine Idee.
Wir, wir machen nochmal ein If.
Wir machen nochmal ein If und gucken jetzt, ob Target, ob Target leer ist.
Weil Target ist, wobei, ja, ist, ja doch.
Target ist leer.
Klar, muss ja leer sein.
Wenn er nix, wenn er nix, wenn, wenn die Backends, wenn die Backends down sind, dann ist es leer.
Ja.
Dann, dann, dann machen wir das so.
Wir gucken.
Wir gucken, ob Target leer ist.
Wenn Target leer ist, dann geben wir aus, ähm, No Valid Backend Found.
Und wenn es nicht leer ist, dann geben wir aus Block und Backend.
So.
Nenn das einfach jetzt nicht Target, sondern Backend.
Oh, weil ansonsten.
So.
So.
Funzt, funzt das jetzt schon mal.
Lasst uns mal checken.
Backend.
Backend 80, 80.
Okay.
Aus.
81, 8001 wird select.
Und jetzt, pass auf, jetzt mach ich mal beides aus.
Wie gehen denn eigentlich die Clients damit um, wenn die Session gekillt wird, weil das
Backend sich wechselt?
Die werden wahrscheinlich, ja, time outen.
Vermutlich.
Wenn es, wenn es dick, wobei, ich weiß es gar nicht.
Eine gute Frage.
Wann werden die time outen?
Die machen ja immer neue Requests.
Ja.
Ja.
Ja.
Ja.
Ja.
Ja.
Ja.
Ja.
Ja.
Ja.
Ja.
Ja.
Ja.
Ja.
Ja.
Ja.
Ja.
Ja.
Ja.
Die machen ja immer neue Requests.
Ach da muss man mal gucken.
Die machen neue Requests.
Der nächste Request geht dann hoch da hin.
HTTP ist zustandslos.
Die könnten natürlich eine bestehende TCP Verbindung benutzen.
Irgendwie über Websocket, oder sowas.
Dann wird's wahrscheinlich abkacken.
Ja.
Ah ja.
Gut dann time outen.
Dann bauen wir eine neue auf.
Gut, ist.
Wenn das Backend ausgeschaltet wird.
Dann ist halt, ist halt weg.
In dem Fall.
In dem Fall.
In dem Fall.
ausgeschaltet.
Müssen wir mal gucken. Das ist ja nur so eine
rudimentäre so
Implementierung jetzt. Kann man bestimmt noch
verfeinern, wenn man das möchte.
Ja. Das ist ein Backend.
So, jetzt schalten wir mal aus. Mal gucken, was dann
passiert.
No valid Backend-Fault. Guck mal.
Unser Custom-Hels-Check.
Der ist gar nicht mal so kacke.
Schalten wir mal wieder eins
ein. Schalten wir mal das hier ein.
Ups. Ja.
Und schalten wir mal das hier ein.
Jetzt hatten wir den anderen.
Zack. Okay. Ich muss sagen,
Leute, das funktioniert wirklich
erstaunlich gut. Das hätte ich jetzt gar nicht
so gedacht.
Das funktioniert
gar nicht mal so schlecht.
So. Und jetzt?
Jetzt ist die Frage.
Moment. Moment. Wir haben
glaube ich eine wichtige Sache noch vergessen.
Das ist ja alles nur Textausgabe
bisher. Wir müssen jetzt noch
gucken, ob
das
ausgewählte Backend
das Backend ist, was von
HA-Proxy gerade gecheckt wird.
Wenn es das ist,
dann soll es aktiv sein.
Wenn es das nicht ist, dann nicht.
Ich glaube,
anhand des Return-Codes
kann man sagen, ob HA-Proxy das
anschalten soll oder nicht.
Hier. Guck mal. Hier. Hier. Hier steht
irgendwas.
Exit-Code 0 for a healthy server.
Okay. Also, machen wir mal irgendwie...
Ich weiß noch nicht, was ich für eine
Bedingung brauche. Hier.
If true. Also, if was auch
immer dann da reinkommt.
So. Und dann sagen wir sowas wie hier
Exit 0.
Wobei, das können wir doch eigentlich viel...
Warte mal. Wie macht man...
Wie macht man das in Bash jetzt schön?
Wie würde man das...
Also, ich meine, wir könnten
so schreiben.
Aber das kann man doch in Bash
bestimmt. Das kann man doch in Bash
bestimmt kurzer und knackiger
schreiben, oder?
Meint ihr, in irgendeiner anderen
Programmiersprache würde ich jetzt sowas machen?
Hier irgendwie Exit und
ja, hier, keine Ahnung.
Bedingungen
so irgendwie
0.
Aber ich glaube, das geht in Bash nicht.
Bash
Ternary Operator.
Hat Bash sowas?
Ja, Andreas, das ist
gar nicht schlecht.
Das ist dieses Short,
diese If, If, kurz.
Moment, Bash hat sowas, wirklich?
Wait a minute.
Bash hat sowas?
Ach, only with
Numbers.
Okay.
F.
Ja, das, das, das, da wäre ich auch drauf gekommen.
Wir können auch einfach ein If da stehen lassen
und gut ist.
Jetzt ist die Frage, was wir eigentlich checken wollen.
Wir wollen checken, ob...
Lass uns das mal doch in If schreiben.
Wir wollen checken, ob...
Dollar Backend.
Gleich, gleich, ich weiß, dass das so in Bash nicht geht.
Aber
ich bin mir gerade nicht sicher, wie das
richtig ist. Checkhost und Checkport.
Checkhost.
Checkport.
Warte mal.
Bash String
Compare.
How to compare Strings in Bash.
Das ist nämlich, glaube ich,
ein einfaches Gleich.
Ach, mit Bash-Magic.
Doppelten, doppelten Klammern.
Ja, Bash ist auch nicht die schönste Sprache, ne?
Chat, was sagt ihr?
Was findet ihr optisch hübscher?
Bash oder Rust?
Ich weiß, es ist eine schwierige Wahl.
Ist beides ziemlich hässlich.
So, wie geht das jetzt weiter?
Check if...
Ach, ne, doch nur ein...
Moment.
Ey, zweifach mit...
Bash, aber uff, ja, finde ich auch.
Okay, dann...
Dann stimmt das sogar, was ich hier
gefabriziert hab.
Okay.
Und was sagt ihr?
Wir müssen das eindampfen in...
Wir müssen das eindampfen in One-Liner,
weil Bash...
Äh...
Ähm...
Observer 2 ist down?
Warum?
Ich bin verwirrt, Leute.
Ja.
Ach, weil der niedriger ist.
Ja, das ist ja auch korrekt.
Das ist ja auch richtig so.
Das ist ja auch richtig so.
Das ist ja der Held.
Genau deswegen mach ich das ja auch.
Lull.
Wunderbar.
Weißt du, der ganze Sinn der Geschichte ist,
dass ein Server down ist,
aber nein, das ist verwundert sein.
Das ist genau das, was ich haben wollte.
Ja.
Ja, das funktioniert.
Das funktioniert tatsächlich.
Guck mal.
Sollen wir den aus?
Moment, ich hab den falschen...
Falschen ausgesucht.
Falschen ausgesucht.
Falschen ausgesucht.
Falschen ausgesucht.
Falschen ausgesucht.
Falschen ausgesucht.
Falschen ausgesucht.
Jetzt machen wir den hier aus.
Und jetzt switch das rüber.
So.
Guck, jetzt kommen meine Requests hier raus.
Oder auch nicht.
Oh.
Ach, Moment.
Ich muss auf 80, 80 gehen.
Ist ja auch falsch.
Jetzt kommen meine Requests hier raus.
Jetzt kommen meine Requests nirgendwo raus.
Und jetzt kommen meine Requests auf 8000 raus.
Naja.
So, jetzt kommen wir auf 8000.
So.
Und wenn ich den hier ausmache,
mache da kommen meine request oben raus nachdem er wieder gecheckt hat dass der server wieder da
ist so und jetzt mache ich den unteren an und dann sollten sie wieder auf die 8000 switchen
ja guck uns ja das funktioniert doch eigentlich erstaunlich gut oder das einzige ding wo ich bin
ich ganz sicher bin ist wie es mit bestehenden tcp verbindungen aussieht wie ihr gefragt habe
beispielsweise web sockets oder sowas das wird halt nicht funktionieren dann wird das back end
down genommen und ist halt ist halt weg die fliegen weg im endeffekt da muss halt neu aufgebaut werden
was ich okay finde du könntest über irgendwelche skript
sagen dass du die schnittstelle auf die schnittstelle schnittstelle schnittstelle
schnittstelle schnittstelle schnittstelle schnittstelle
dass die befehle den das weight anpassen warum du meinst dass nicht dastehen dass der
down ist sondern dass der big quasi einer kriegt 200 der andere 0 oder sowas ja das ist das ist das
wäre das wäre eine idee wobei ich sagen muss das funktioniert jetzt ja eigentlich auch relativ gut
ja
also insofern
ich tendiere
ich meine es ist doof, dass in der Ausgabe
drin steht, einer ist down, obwohl der
noch da ist, ja
aber was willst du machen
ich glaube wait anpassen über den
health check ist nicht drin
dann werden die connections nicht
gekillt und die neuen Verbindungen gehen auf dein
gewünschtes Backend, ja
warte mal, ja
das ist eine gute Idee, das kriege ich heute
aber das nehme ich auf die Reihe
das ist eine gute Idee
ich kriege dafür bestimmt keine 50k
bei mir auf der Arbeit wollen sie sich
eine super teure Loadbalancer Appliance für sowas
kaufen und ich habe gesagt, das kann man
auch mit HA Proxy machen und 3 Zeilen
Bash Script
was im Endeffekt ja
so Proof of Concept mäßig bewiesen
ist, dass das funktioniert
ihr seht, der geht immer nur
auf unten rechts meine Requests
ok
ja dann würde ich das
aber nicht als Health Check oder dann
würde ich das nicht als Health Check
machen, sondern sondern als irgendwas
was außerhalb vom HA Proxy läuft
was programmierst du gerade
ein Custom Health Check für HA Proxy
der auch besser funktioniert als ich es mir
vorgestellt habe ehrlich gesagt
das ist wichtig für Stonks, da gebe ich dir
recht, so muss das sein
so jetzt müssen wir nochmal was anpassen an der HA Proxy
und zwar wie kann man denn den
Intervall hochstellen
HA Proxy Check Intervall
HA Proxy Aloha
Moment hatten wir nicht die HA Proxy
Docs
ok
Server
Server and Default Server Options Server
ja wie wie Moment Check
Server
Check
Health Check
oh ich bin zu dumm die HA Proxy
wie macht man denn wie macht man denn
Health Check
HA Proxy Check Intervall
da muss man doch setzen können
Stack Stack Overflow
ja
bei Default HA Proxy will Option
Fallback ist 3 Error Limit
Tune Health Check Intervall
Was Inter, Faster Inter, Down Inter
What?
Inter Parameter sets the Intervall between two Health Checks
Milliseconds
das übertreibt man nicht alter
in Milliseconds also eine Sekunde
eine Sekunde reicht mir da muss ich halt tausend Milliseconds machen
Was just as with every time based Parameter they can be entered in any other explicit you immer
ah man kann auch Sekunden hinschreiben ok
also sprich ich schreib jetzt da hinten was hin?
Inter
5 Sekunden oder wie?
Inter
ja viel besser viel besser
ja gut gefällt mir
das finde ich äußerst nice
wie gut das funktioniert
ne das ist das ist nicht das ist ein anderer Hersteller
ist doch jetzt höher als Default
ja ist es will ich auch
ich will es ja auch höher als Default
5 Sekunden reicht dicke aus
so schnell synchronisieren die sich nicht
muss ja nicht so rumspammen
guck mal das Log ist auch
es eskaliert auch komplett alter
ähm
ich mach mal haproxy
log
log directory wie kann man
ja
was?
haproxy
doesn't support logging to files
what?
ach der kann nur syslog
der kann echt nur syslog?
ja ich mein ich kann den Output in ne Logdatei pipen
ja das ist mir auch krass
ja das ist mir auch klar
aber schön ist was anderes
also
also mein das
ich mein so schlau ups
so schlau wäre ich jetzt auch gewesen
ja
so was machen können
guck jetzt haben wir haben wir ne Logfile
ganz schön spammiges Logfile
das gefällt mir aber gut
also Leute mal ganz im Ernst
für so übers Knie gebrochene Lösung
ist das doch gar nicht übel
ich glaub
ich glaub das zeigt doch
erst mal
dass man keine 50.000 Euro teure
Loadbalancer braucht um sowas zu machen oder
weil
also ich mein
was haben die eigentlich auf ihrer krassen Loadbalancer
Appliance laufen
dann 60 Zeilen Bash Script oder was
ein bisschen mehr
muss es ja schon sein
ja ok sie haben ein schönes React
Web Interface gebaut
drum herum um
30 Zeilen Bash Script
und bisschen Advancer wird schon sein
ja ok
so schön ist es nicht
hier dass man die HA-Proxy
Conv sich das rausgrippt und sowas
aber trotzdem mein es funktioniert
warum nicht Caddy ohne Nginx
weil man mit HA-Proxy schön rumbasteln kann
was Custom Checks und sowas angeht
der Loadbalancer ist written in Rust Blazingly Fast
bestimmt bestimmt
du hast recht
du hast recht
die Frage
die ich mir stelle
warum
ich mein das läuft auf dem normalen Lino
und selbst wenn du es im Docker Container laufen lässt
installierst du dir halt Curl
ich mein und
also
ich verstehe was du meinst
man könnte es super minimalistisch
minimalistisch machen
man könnte auch
man könnte sich da auch irgendwas in Go basteln
oder in Rust
ähnlich macht
pushst du das
hab so viel verpasst
es gibt nicht viel zu pushen
ich hab nen Custom Health Check für HA-Proxy gebaut
das wars
mehr hat er nicht
und ich
also das was
der Strafo
was Strafo vorhin geschrieben hat
das würde ich auch gerne nochmal ausprobieren
dass man ein Programm nebenbei laufen lässt
und die
das
das Weight
welches Backend bevorzugt
auf der anderen Seite
ich glaube fast
dass es besser wäre
also dass es besser ist
wie
wie ich das mache
weil
das soll ruhig die Verbindung abbrechen
wenn er nämlich eine langlaufende TCP Verbindung hat
und auf dem alten outdated Server gelandet ist
dann wird die ja quasi nie abgebaut
dann wird die ja quasi nie abgebaut
dann ist besser
die wird gekappt
und die andere Seite verbindet sich neu
aber eine Sache
die man noch einbauen müsste hier
eine Sache sollte man noch einbauen
nicht
nicht zu oft switchen
das wäre tatsächlich eine Sache
die man noch einbauen müsste
weil
stellt euch mal vor
beide Server sind ganz knapp
sind ganz knapp
gleichauf
wenn wir
switchen quasi im Sekundentakt
dann würde der Health Check permanent die Verbindung
das wäre dann eher nicht so geil
ja
das ist ja gerade das tolle an der Blockchain
da geht nichts verloren
im Zweifelsfall synchst du und dann ist sie da
alle anderen Nodes
von denen du synchst haben die ja
also
nicht zu oft switchen ist auf jeden Fall
wäre auf jeden Fall nicht verkehrt
also man könnte
wenn das letzte mal geswitcht wurde
und
für 5 Minuten nicht mal switchen so
das könnte man machen
wobei er dann auch nicht erkennt ob das down ist
da muss ich mir noch mal Gedanken drüber machen
aber
ja sagen wir mal so als Proof of Concept
finde ich das eigentlich ganz gut
du kannst ja einen zweistufigen Check einbauen
ist Port offen? ja, nein
achso du meinst dass ich prinzipiell abfackeln kann
falls der
falls ich unter 5 Minuten bin
und der wirklich mal
ausfällt dass er dann doch auf den geht
der noch da ist
ja das könnte man machen
das muss ich mir noch mal durch den Kopf gehen lassen
wie ich das am besten mache
aber das gefällt mir erstmal
und wisst ihr was das coole ist
wenn man jetzt
wenn man irgendwie 5 Server hat oder so
könnte man
theoretisch auch sagen
aber wie gesagt mit dem Lua
das finde ich richtig cool mit dem Lua Plugin
jaja
ich würde das wahrscheinlich in Lua auch hinkriegen
ich mein meine Terminal Config ist in Lua
ja
ist zwar nicht die
ist zwar nicht das schönste Lua aber
meine Terminal Config ist in Lua
so ein bisschen was in Lua
kriege ich zur Not hin
selbst irgendein Lua
Plugin gebaut
ja da hatten wir hier den
hier das Beispiel
also das Beispiel hier von denen ist ziemlich gut
hier Backend with Least Connection
hier müsste ich halt in Lua
den
genau hier kriegst du auch alle Backend
Backend Namen und Server Namen
und hier müsste ich dann den AP
die AP Abfrage drin machen
AProxy Lua
kann man da Curl benutzen drin
Dynamic Backend Selection
with Lua Script
oh jetzt
jetzt aber advanced hier
Local Function Pick Backend
Local Function Pick Backend
ja genau sowas
If Backend Name Master
Filter Out
Build in Backend
ja das ist
natürlich cool dann hast du
Zugriff auf den internen Status
halt von HA Proxy
ja das gefällt mir
das bookmarke ich mir mal
das finde ich nice
und
ach hier
TCP Connect
Moment Moment
der macht der macht HTTP
von Hand sehe ich das richtig in seinem
Oh je
und JSON Parse
dann auch von Hand oder wie
kann man da irgendwelche
Lua Libs laden vielleicht
Lua HA Proxy
JSON Parse
da kann man wahrscheinlich auch Curl
aufrufen ja was
Lua HTTP
Client Library for HA Proxy
alter was ist nicht
alles gibt man
ich geb dir Header alter
was ist nicht alles gibt alter
Lua HA Proxy
Lua HA Proxy
meine Güte
ja also das ist eine gute Idee
das da drüber zu machen
das wäre äußerst Business
Enterprise
macht er das hier mit wait
oder wie macht er das eigentlich
ne der setzt nicht
der macht das was ich mache
nur mit Lua
wenn er das gleich mit Lua macht kann ich es auch mit dem Bash Script machen
also
ich werd mir nochmal Gedanken drüber machen
wie ich das am besten
bauen kann
noch das der nicht zu oft
zu oft switcht
und dann würde ich sagen
Chat das war heute
kurz und knackig aber wir haben was auf die Reihe gekriegt
ich muss jeden 20 Minuten
pennen
dann geh ich jetzt schon off
und wir sehen uns morgen oder die Tage
machts gut bis denn see you
